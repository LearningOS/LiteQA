{"result": {"folders": ["lecture6", "课堂问答", "2020"], "nr": 1419, "data": {"embed_links": []}, "created": "2020-03-05T02:21:50Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "full", "data": "k7e4jfrsat161l", "type": "create", "when": "2020-03-05T02:21:50Z", "uid_a": "a_0"}, {"anon": "stud", "data": "k7euy07fawz1k5", "to": "k7e4jfrqy5y61k", "type": "s_answer", "when": "2020-03-05T14:40:59Z", "uid_a": "a_1"}, {"anon": "stud", "data": "k7ev1l0bv9w44k", "type": "s_answer_update", "when": "2020-03-05T14:43:46Z", "uid_a": "a_1"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "k7ju1nicfoo2o", "type": "update", "when": "2020-03-09T02:14:41Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "最高级页表是否会发生缺页异常", "created": "2020-03-09T02:14:41Z", "content": "<p>最高级页表&#xff0c;也就是cr3或satp对应的一到两个页&#xff0c;是否会发生缺页异常呢&#xff1f;<br />目前讨论的一些成果&#xff1a;</p>\n<p><br />这个问题涉及到进程管理&#xff0c;我们简化讨论。<br /></p>\n<p> </p>\n<ol><li>如果进程还没有进入就绪状态&#xff08;如在等待状态&#xff09;&#xff0c;与它相关的所有数据都有可能不在内存&#xff08;包括第一级页表&#xff09;。这不是执行程序代码时的缺页&#xff0c;而是操作系统内核修改进程状态时的缺页。</li><li>程序已经在执行中了&#xff0c;那这里第一级页表一定在内存的&#xff0c;否则前面的指令就无法工作了。</li><li>程序已经在执行中了&#xff0c;访问第一级页表中的页表项时&#xff0c;可能出现相应表项对应的二级页表缺页。</li><li>“页表项缺页”的说法不准确。只有指令执行时要访问的页面无法访问时&#xff0c;才出现缺页&#xff1b;只有用 virtaddr 访问内存才会导致 PF&#xff0c;所有的 CR3 / PDE / PTE 都是 physaddr。</li><li>二级页表有可能不存在的。这种情况不应该叫缺页&#xff0c;叫 ”CR3 指向的物理地址并没有包含一个页表“ i.e. dangling CR3&#xff0c;应该算是用户代码缺页导致的页面加载的一个中间过程。好像ucore&#43;中有相关代码&#xff08;需要确认&#xff09;。 </li></ol>\n<p></p>\n<p></p>\n<p></p>"}, {"anon": "full", "uid_a": "a_0", "subject": "最高级页表是否会发生缺页异常", "created": "2020-03-05T02:21:50Z", "content": "<p>最高级页表&#xff0c;也就是cr3或satp对应的一到两个页&#xff0c;是否会发生缺页异常呢&#xff1f;<br />目前讨论的一些成果&#xff1a;</p>\n<p><br />这个问题涉及到进程管理&#xff0c;我们简化讨论。<br />1. 如果进程还没有进入就绪状态&#xff08;如在等待状态&#xff09;&#xff0c;与它相关的所有数据都有可能不在内存&#xff08;包括第一级页表&#xff09;。这不是执行程序代码时的缺页&#xff0c;而是操作系统内核修改进程状态时的缺页。<br />2. 程序已经在执行中了&#xff0c;那这里第一级页表一定在内存的&#xff0c;否则前面的指令就无法工作了。<br />3. 程序已经在执行中了&#xff0c;访问第一级页表中的页表项时&#xff0c;可能出现相应表项对应的二级页表缺页。</p>\n<p></p>\n<p>如果在程序执行过程中&#xff0c;由于cr3并没有完整页表项的结构&#xff0c;没有一个驻留位&#xff0c;被换出后无法恢复和感知&#xff0c;os / MMU会读取到错误的页表内容&#xff0c;导致进程崩溃。</p>\n<p></p>\n<p></p>"}], "type": "question", "tags": ["lecture6", "student"], "tag_good": [], "unique_views": 141, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2020-03-05T14:40:59Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "k7euy07ba041k4", "history": [{"anon": "stud", "uid_a": "a_1", "subject": "", "created": "2020-03-05T14:43:46Z", "content": "<p>考虑x86情况&#xff0c;cr3中存放的是页目录所在<strong>物理页</strong>的<strong>物理基地址</strong>&#xff0c;因此在通过cr3访问页目录时&#xff0c;除非目标虚地址的页目录索引&#xff08;虚地址的最高10位&#xff09;对应的页目录项的<strong>物理地址</strong>(cr3&#43;页目录索引*4) 超出了物理内存大小&#xff0c;否则不可能在访问页目录时发生缺页异常。但是紧接着使用页目录项访问二级页表时&#xff0c;可能出现二级页表尚未分配的情况&#xff0c;这时可能发生缺页异常。</p>"}, {"anon": "stud", "uid_a": "a_1", "subject": "", "created": "2020-03-05T14:40:59Z", "content": "<p>考虑x86情况&#xff0c;cr3中存放的是页目录所在<strong>物理页</strong>的<strong>物理基地址</strong>&#xff0c;因此在通过cr3访问页目录时&#xff0c;除非目标虚地址的页目录索引&#xff08;虚地址的最高10位&#xff09;对应的页目录项的<strong>物理地址</strong>(cr3&#43;页目录索引*4) 超出了物理内存大小&#xff0c;否则不可能发生缺页异常。</p>"}], "type": "s_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}], "tag_good_arr": [], "no_answer": 0, "id": "k7e4jfrqy5y61k", "config": {"seen": {"276": 4, "761": 1, "1303": 2, "102": 9, "1366": 0, "930": 3, "757": 8, "1074": 7, "1292": 6, "383": 5}}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 3, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643170007870, "default_anonymity": "no"}, "error": null, "aid": "kyv0zwhqbijk"}