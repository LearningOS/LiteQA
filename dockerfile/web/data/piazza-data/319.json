{"result": {"history_size": 6, "folders": ["big_proj"], "nr": 319, "data": {"embed_links": []}, "created": "2015-04-19T14:00:41Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T14:00:41Z", "data": "i8oiu5yyd6y1y2", "type": "create"}, {"uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T14:01:29Z", "data": "i8oiv722alt3ao", "type": "update"}, {"uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T14:01:51Z", "data": "i8oivo2xoym4qe", "type": "update"}, {"uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T14:02:32Z", "data": "i8oiwjixw273id", "type": "update"}, {"uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T14:03:02Z", "data": "i8oix72u7356st", "type": "update"}, {"to": "i8oiu5yv4i1y1", "uid": "hdjonbiyfs62ie", "anon": "no", "when": "2015-04-19T15:22:41Z", "data": "i8olrmgz6d563z", "type": "i_answer"}, {"uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T15:45:23Z", "data": "i8omkttsm6e54g", "type": "update"}, {"to": "i8oiu5yv4i1y1", "uid": "hcrrjuyequh4bt", "anon": "no", "when": "2015-04-19T15:46:58Z", "type": "followup"}, {"to": "i8oiu5yv4i1y1", "uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-19T15:52:54Z", "type": "feedback"}, {"to": "i8oiu5yv4i1y1", "uid": "i6un8w0cKfP", "anon": "no", "when": "2015-04-20T10:02:57Z", "type": "followup"}, {"to": "i8oiu5yv4i1y1", "uid": "hcrrjuyequh4bt", "anon": "no", "when": "2015-04-21T14:18:00Z", "type": "feedback"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "i6un8w0cKfP", "subject": "ucore_plus x86_64本身内存有问题", "created": "2015-04-19T15:45:23Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault&#xff0c;非法内存访问</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会直接崩溃&#xff0c;i386没有这样的问题。</p>\n<p>我正在找原因&#xff0c;但是由于对ucore_plus乱七八糟的代码不熟悉很困难。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>"}, {"anon": "no", "uid": "i6un8w0cKfP", "subject": "ucore_plus x86_64本身内存有问题", "created": "2015-04-19T14:03:02Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault&#xff0c;非法内存访问</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因&#xff0c;但是由于对ucore_plus乱七八糟的代码不熟悉很困难。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>"}, {"anon": "no", "uid": "i6un8w0cKfP", "subject": "ucore_plus x86_64本身内存有问题", "created": "2015-04-19T14:02:32Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因&#xff0c;但是由于对ucore_plus乱七八糟的代码不熟悉很困难。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>"}, {"anon": "no", "uid": "i6un8w0cKfP", "subject": "ucore_plus x86_64本身内存有问题", "created": "2015-04-19T14:01:51Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>"}, {"anon": "no", "uid": "i6un8w0cKfP", "subject": "ucore_plus x86_64本身内存有问题", "created": "2015-04-19T14:01:29Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后尚未解决问题。</p>\n<p></p>"}, {"anon": "no", "uid": "i6un8w0cKfP", "subject": "ucore_plus x86_64本身内存有问题", "created": "2015-04-19T14:00:41Z", "content": "<p>重现方法&#xff1a;</p>\n<p>git clone <a href=\"https://github.com/chyyuu/ucore_plus.git\">https://github.com/chyyuu/ucore_plus.git</a></p>\n<p>将kern-uroce/arch/amd64/trap/trapentry.s中的第26行&#xff0c;28行的movew改为moveq&#xff0c;否则无法编译&#xff08;没有关系&#xff0c;因为es和ds在x86_64下完全没用&#xff09;。</p>\n<p>make ARCH=amd64 defconfig</p>\n<p>make</p>\n<p>make sfsimg</p>\n<p>./uCore_run -c</p>\n<p>$ echo</p>\n<p>出现page fault</p>\n<p>$ mkdir a</p>\n<p>出现invalid argument</p>\n<p>重现率&#xff1a;100%可重现。</p>\n<p></p>\n<p>出现错误的原因大概是栈内存管理有问题&#xff0c;应该是有些地方没有map上&#xff0c;在load_icode的末尾直接memset(USTACKTOP-USTACKSIZE, 0, USTACKSIZE)也会出现&#xff0c;i386不会。</p>\n<p>我正在找原因。目前我发现了proc.c中很多地方是uint32_t但是明显应该是size_t&#xff0c;但我改掉之后还是不行。</p>\n<p></p>"}], "type": "question", "tags": ["big_proj", "student"], "tag_good": [], "unique_views": 79, "children": [{"history_size": 1, "folders": [], "data": {"embed_links": []}, "created": "2015-04-19T15:22:41Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "", "created": "2015-04-19T15:22:41Z", "content": "<p>下面链接是与x86-64的ucore最新工作&#xff0c;可供参考。</p>\n<p></p>\n<p><a href=\"http://os.cs.tsinghua.edu.cn/oscourse/OS2013/projects/U01\">http://os.cs.tsinghua.edu.cn/oscourse/OS2013/projects/U01</a></p>\n<p></p>\n<p>李恺威同学当时的工作是对64位时的系统调用实现进行优化和完善。我的印象是&#xff0c;他改正了不少64位下比较难调的内核错误。最后结果好像没有合并到主分支上。</p>\n<p></p>"}], "type": "i_answer", "tag_endorse_arr": [], "children": [], "id": "i8olrmgwwr363y", "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>我觉得你可以从32位的x86入手。我已经搭建了一个x86-32 ucore-plus的编译运行环境&#xff0c;给你们发了电邮&#xff0c;你们可以看看并试试。</p>", "created": "2015-04-19T15:46:58Z", "bucket_order": 296, "bucket_name": "Week 4/19 - 4/25", "type": "followup", "tag_good": [], "uid": "hcrrjuyequh4bt", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>我尝试了x86的&#xff0c;目前musl动态链接库的重定位似乎已经正常工作可以进入syscall&#xff0c;前几个需要实现的syscall主要是一些tls的东西&#xff0c;然后应该就可以进main了。x86_64由于以上问题不能启动。</p>\n<p>我看了一下linux的x86和x64的syscall&#xff0c;差异比较大&#xff0c;编号和数量内容均不同。如果最终要做x86_64的话先去弄x86似乎不太现实。</p>\n<p></p>\n<p>[update] 我才发现李恺威的工作。。目前看来是得在他的基础上做了&#xff0c;我之前看到的可运行代码都是arm的导致我一开始计划从头弄起。</p>", "created": "2015-04-19T15:52:54Z", "bucket_order": 296, "bucket_name": "Week 4/19 - 4/25", "type": "feedback", "tag_good": [], "uid": "i6un8w0cKfP", "children": [], "tag_good_arr": [], "id": "i8omuhpkqqk71b", "updated": "2015-04-19T15:52:54Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i8ommuq4uto5ja", "updated": "2015-04-19T15:46:58Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>李恺威的代码也有同样的问题。。</p>", "created": "2015-04-20T10:02:57Z", "bucket_order": 296, "bucket_name": "Week 4/19 - 4/25", "type": "followup", "tag_good": [], "uid": "i6un8w0cKfP", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>明确最终目标和阶段性目标&#xff0c;已经研究步骤很重要。</p>\n<p>明天上午11点有空吗&#xff1f;如有空&#xff0c;请到fit 3-106面谈解决。</p>", "created": "2015-04-21T14:18:00Z", "bucket_order": 296, "bucket_name": "Week 4/19 - 4/25", "type": "feedback", "tag_good": [], "uid": "hcrrjuyequh4bt", "children": [], "tag_good_arr": [], "id": "i8rec5ig3f34pm", "updated": "2015-04-21T14:18:00Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i8ppsaw2ogs2bp", "updated": "2015-04-20T10:02:57Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i8oiu5yv4i1y1", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 4, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643167627767, "default_anonymity": "no"}, "error": null, "aid": "kyuzkvzrifh1o8"}