{"result": {"folders": ["lab2"], "nr": 192, "data": {"embed_links": []}, "created": "2015-03-28T06:12:52Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "full", "when": "2015-03-28T06:12:52Z", "data": "i7smft8ujbg4q3", "type": "create", "uid_a": "a_0"}, {"to": "i7smft8rl004q2", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-03-28T07:10:42Z", "data": "i7soi6w4umo6m6", "type": "i_answer"}, {"to": "i7smft8rl004q2", "anon": "full", "when": "2015-03-28T07:30:59Z", "type": "followup", "uid_a": "a_0"}, {"to": "i7smft8rl004q2", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-03-28T08:48:26Z", "type": "feedback"}, {"to": "i7smft8rl004q2", "anon": "full", "when": "2015-03-28T09:58:50Z", "type": "feedback", "uid_a": "a_0"}, {"to": "i7smft8rl004q2", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-03-28T11:42:55Z", "type": "feedback"}, {"to": "i7smft8rl004q2", "anon": "stud", "when": "2015-03-29T15:43:44Z", "type": "feedback", "uid_a": "a_1"}, {"to": "i7smft8rl004q2", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-03-30T00:35:06Z", "type": "feedback"}, {"anon": "stud", "when": "2015-04-01T12:53:11Z", "data": "i7yqi1csl2d68c", "type": "update", "uid_a": "a_2"}], "bucket_name": "Today", "history": [{"anon": "stud", "uid_a": "a_2", "subject": "lab2 default_pmm.c注释的疑惑", "created": "2015-04-01T12:53:11Z", "content": "<p>老师好&#xff0c;</p>\n<p></p>\n<p>在default_pmm.c的第26&amp;27行&#xff0c;</p>\n<p></p>\n<p>First you should init each page (in memlayout.h) in this free block, include: p-&gt;flags should be set bit PG_property (means this page is valid. </p>\n<p></p>\n<p>但是在memlayut.h中对于PG_property的解释是</p>\n<p></p>\n<p>if this bit=1: the Page is the head page of a free memory block(contains some continuous_addrress pages), and can be used in alloc_pages; if this bit=0: if the Page is the the head page of a free memory block, then this Page and the memory block is alloced. Or this Page isn&#39;t the head page.</p>\n<p></p>\n<p>感觉default_init_memmap函数中不应该只有第一个page作为free memory block的head才应该设成1&#xff0c;后面block中的page此位应该设成0才对吗&#xff1f;还是我理解的不到位。。。</p>\n<p></p>\n<p>谢谢&#xff01;</p>\n<p></p>"}, {"anon": "full", "uid_a": "a_0", "subject": "lab2 default_pmm.c注释的疑惑", "created": "2015-03-28T06:12:52Z", "content": "<p>老师好&#xff0c;</p>\n<p></p>\n<p>在default_pmm.c的第26&amp;27行&#xff0c;</p>\n<p></p>\n<p>First you should init each page (in memlayout.h) in this free block, include: p-&gt;flags should be set bit PG_property (means this page is valid. </p>\n<p></p>\n<p>但是在memlayut.h中对于PG_property的解释是</p>\n<p></p>\n<p>if this bit=1: the Page is the head page of a free memory block(contains some continuous_addrress pages), and can be used in alloc_pages; if this bit=0: if the Page is the the head page of a free memory block, then this Page and the memory block is alloced. Or this Page isn&#39;t the head page.</p>\n<p></p>\n<p>感觉default_init_memmap函数中不应该只有第一个page作为free memory block的head才应该设成1&#xff0c;后面block中的page此位应该设成0才对吗&#xff1f;还是我理解的不到位。。。</p>\n<p></p>\n<p>谢谢&#xff01;</p>\n<p></p>"}], "type": "question", "tags": ["lab2", "student"], "tag_good": [], "unique_views": 169, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2015-03-28T07:10:42Z", "bucket_order": 3, "tag_endorse": [{"role": "student", "name": "MINNE LI", "endorser": {}, "admin": false, "photo": null, "id": "i6yijp8lzvk2yv", "photo_url": null, "published": true, "us": false, "class_sections": ["清华学生_i5j09fnsl7k5x0"], "facebook_id": null}], "bucket_name": "Today", "id": "i7soi6vm78p6m5", "history": [{"anon": "no", "uid": "hdjoucuyb836fq", "subject": "", "created": "2015-03-28T07:10:42Z", "content": "<p>PG_property位最初是为buddy system设置的&#xff0c;在实现first fit算法时&#xff0c;可以简单理解成PG_property意味着页可用&#xff0c;PG_reserved意味着页已分配或不可用。</p>\n<p></p>\n<p>代码中的注释提供了一种参考的实现方式&#xff0c;但绝不是唯一的标准答案&#xff0c;你完全可以按照自己的理解&#xff0c;用自己的方式实现页分配算法。</p>"}], "type": "i_answer", "tag_endorse_arr": ["i6yijp8lzvk2yv"], "config": {}, "is_tag_endorse": false}, {"anon": "full", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>如果按照注释里对PG_property的理解&#xff0c;free block中非head的page此位为0的话&#xff0c;实现之后在check时由于default_check()函数中的</p>\n<pre>default_check(void) {\n    int count = 0, total = 0;\n    list_entry_t *le = &amp;free_list;\n    while ((le = list_next(le)) != &amp;free_list) {\n        struct Page *p = le2page(le, page_link);\n        assert(PageProperty(p));\n        count &#43;&#43;, total &#43;= p-&gt;property;\n    }</pre>\n<p>第六行会强制验证是否所有Page&#xff08;无论是否是head&#xff09;的PG_property位为1&#xff0c;若把此行注释掉的话就可以通过测试。。</p>", "created": "2015-03-28T07:30:59Z", "bucket_order": 263, "bucket_name": "Week 3/22 - 3/28", "type": "followup", "tag_good": [], "uid_a": "a_0", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>注意注释里的head page指的是一个a free memory block的head page&#xff0c;即一块可用且连续的内存的第一个页&#xff0c;而free_list中的每一个都是a free memory block。</p>", "created": "2015-03-28T08:48:26Z", "bucket_order": 263, "bucket_name": "Week 3/22 - 3/28", "type": "feedback", "tag_good": [], "uid": "hdjoucuyb836fq", "children": [], "tag_good_arr": [], "id": "i7srzv6cjoi1zl", "updated": "2015-03-28T08:48:26Z", "config": {}}, {"anon": "full", "folders": [], "data": {"embed_links": null}, "subject": "<p>意思是free_list中的链表项都是每一个free block的第一页吗&#xff1f;还是里面包含了所有空闲的页面&#xff1f;</p>", "created": "2015-03-28T09:58:50Z", "bucket_order": 263, "bucket_name": "Week 3/22 - 3/28", "type": "feedback", "tag_good": [], "uid_a": "a_0", "children": [], "tag_good_arr": [], "id": "i7suiejkzxh2cc", "updated": "2015-03-28T09:58:50Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>free_list中的都是head page of a free memory block&#xff0c;每一个memory block的大小保存在head page对应Page结构的property域。</p>", "created": "2015-03-28T11:42:55Z", "bucket_order": 263, "bucket_name": "Week 3/22 - 3/28", "type": "feedback", "tag_good": [], "uid": "hdjoucuyb836fq", "children": [], "tag_good_arr": [], "id": "i7sy89n9pue311", "updated": "2015-03-28T11:42:55Z", "config": {}}, {"anon": "stud", "folders": [], "data": {"embed_links": null}, "subject": "<p>可是lab2_result里的实现并不是助教所说的这个意思&#xff0c;它将每个page都加入了free_list</p>", "created": "2015-03-29T15:43:44Z", "bucket_order": 262, "bucket_name": "Week 3/29 - 4/4", "type": "feedback", "tag_good": [], "uid_a": "a_1", "children": [], "tag_good_arr": [], "id": "i7um9t8qmok1nc", "updated": "2015-03-29T15:43:44Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>我说的是lab2原始代码里的default_pmm中对free_list的用法。free_list本身只是一个page的list&#xff0c;check中只要求了挂在free_list中的page需要标记property位并设置page-&gt;property&#xff0c;至于哪些page应该挂到free_list中&#xff0c;lab2_result只是给了一个参考的实现&#xff0c;并不唯一。</p>", "created": "2015-03-30T00:35:06Z", "bucket_order": 262, "bucket_name": "Week 3/29 - 4/4", "type": "feedback", "tag_good": [], "uid": "hdjoucuyb836fq", "children": [], "tag_good_arr": [], "id": "i7v5956g28r2uf", "updated": "2015-03-30T00:35:06Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i7sp89p6qq34x3", "updated": "2015-03-28T07:30:59Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i7smft8rl004q2", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 6, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643167450169, "default_anonymity": "no"}, "error": null, "aid": "kyuzh2yh6ezoz"}