{"result": {"folders": ["lecture10"], "nr": 1181, "data": {"embed_links": []}, "created": "2018-03-30T09:37:53Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "hcrrjuyequh4bt", "data": "jfdr8t04fdmpc", "type": "create", "when": "2018-03-30T09:37:53Z"}, {"anon": "no", "uid": "hcrrjuyequh4bt", "data": "jfdt8tf68t7nq", "type": "update", "when": "2018-03-30T10:33:53Z"}, {"anon": "no", "uid": "isy2wn7zj0u2ne", "to": "jfdr8t01alfpb", "type": "followup", "when": "2018-04-04T15:10:43Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hcrrjuyequh4bt", "subject": "陈老师在lec10上的课程bug和fixbug", "created": "2018-03-30T10:33:53Z", "content": "<p>说错了&#xff0c;课上改正了。</p>\n<p></p>\n<p>1. [错]在x86-32 cpu中&#xff0c;CR3寄存器中和PDE&#xff0c;PTE中存放了是高20位的线性地址 </p>\n<p>A&#xff1a;应该是物理地址</p>\n<p></p>\n<p>2. [错]页访问异常后&#xff0c;CR2放了错误编码</p>\n<p>A&#xff1a;异常&#xff08;包括页访问异常&#xff09;的错误编码是被CPU硬件压在kernel stack中</p>\n<p></p>\n<p>3. [错] 产生页访问异常的指令的物理地址在CR2寄存器中</p>\n<p>A&#xff1a;产生访问异常的指令的虚拟地址是被CPU硬件压在kernel stack中</p>\n<p></p>\n<p>4. [对] CR2中放的是产生页访问异常的访问物理地址</p>\n<p></p>\n<p>5. [对] 信intel手册和qemu/kvm做的实验结果。如果与老师说的不符&#xff0c;则老师说错了。</p>"}, {"anon": "no", "uid": "hcrrjuyequh4bt", "subject": "陈老师在lec10上的课程bug和fixbug", "created": "2018-03-30T09:37:53Z", "content": "<p>说错了&#xff0c;课上改正了。给没听课的同学提醒一下。如果你对下面的内容都知道正确答案&#xff0c;请继续不来听课。</p>\n<p></p>\n<p>1. [错]在x86-32 cpu中&#xff0c;CR3寄存器中和PDE&#xff0c;PTE中存放了是高20位的线性地址 </p>\n<p>A&#xff1a;应该是物理地址</p>\n<p></p>\n<p>2. [错]页访问异常后&#xff0c;CR2放了错误编码</p>\n<p>A&#xff1a;异常&#xff08;包括页访问异常&#xff09;的错误编码是被CPU硬件压在kernel stack中</p>\n<p></p>\n<p>3. [错] 产生页访问异常的指令的物理地址在CR2寄存器中</p>\n<p>A&#xff1a;产生访问异常的指令的虚拟地址是被CPU硬件压在kernel stack中</p>\n<p></p>\n<p>4. [对] CR2中放的是产生页访问异常的访问物理地址</p>\n<p></p>\n<p>5. [对] 信intel手册和qemu/kvm做的实验结果。如果与老师说的不符&#xff0c;则老师说错了。</p>"}], "type": "note", "tags": ["instructor-note", "lecture10"], "tag_good": [], "unique_views": 114, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>根据Intel手册&#xff0c;CR2寄存器中存放的应该是产生PAGE FAULT的访问线性地址。而且在ucore中&#xff0c;由于对GDT的设置&#xff0c;这一线性地址的数值等于虚拟地址&#xff08;截止到lab 3都是如此&#xff09;。</p>\n<p></p>\n<p>一个ucore实现中的例子是&#xff0c;在lab 3实验的kernel/trap/trap.c文件中&#xff0c;在pgfault_handler()函数里调用do_pgfault(check_mm_struct, tf-&gt;tf_err, rcr2())时&#xff0c;直接使用了rcr2()也即CR2寄存器值作为实参&#xff0c;而事实上do_pgfault()函数的对应形参含义为虚拟地址&#xff0c;而且这一地址之后被传入find_vma()&#xff0c;作为待查找的虚拟地址。</p>\n<p></p>\n<p>附上手册中原文如下&#xff1a;</p>\n<p></p>\n<p><img src=\"/img/1181-c81afaf665c802be.png\" alt=\"CONTROL REGISTERS\" /></p>\n<p></p>\n<p>&#xff08;参考&#xff1a;Intel® 64 and IA-32 Architectures Software Developer’s Manual Vol. 3A 第2.5节 <em>CONTROL REGISTERS</em>&#xff09;</p>", "created": "2018-04-04T15:10:43Z", "bucket_order": 121, "bucket_name": "Week 4/1 - 4/7", "type": "followup", "tag_good": [], "uid": "isy2wn7zj0u2ne", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "jfl8c31fj036ci", "updated": "2018-04-04T15:10:43Z", "config": {}}], "tag_good_arr": [], "id": "jfdr8t01alfpb", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 2, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169343522, "default_anonymity": "no"}, "error": null, "aid": "kyv0lnvmxqd2d5"}