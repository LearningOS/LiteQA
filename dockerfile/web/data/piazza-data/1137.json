{"result": {"folders": ["lab1", "2018"], "nr": 1137, "data": {"embed_links": []}, "created": "2018-03-04T14:29:45Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "isx6w631skc7on", "data": "jecw7zzyum04ly", "type": "create", "when": "2018-03-04T14:29:45Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jecx8dio2in1hp", "type": "update", "when": "2018-03-04T14:58:02Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jecx9a2kr271v6", "to": "jecw7zzwqgx4lx", "type": "i_answer", "when": "2018-03-04T14:58:44Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jecx9n9ruvl1zp", "type": "i_answer_update", "when": "2018-03-04T14:59:02Z"}, {"anon": "no", "uid": "isx6w631skc7on", "to": "jecw7zzwqgx4lx", "type": "followup", "when": "2018-03-05T01:45:20Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "data": "jeea9argkfw1l8", "to": "jecw7zzwqgx4lx", "type": "s_answer", "when": "2018-03-05T13:50:27Z"}, {"anon": "no", "uid": "isx6w631skc7on", "to": "jecw7zzwqgx4lx", "type": "followup", "when": "2018-03-05T23:54:45Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "to": "jecw7zzwqgx4lx", "type": "feedback", "when": "2018-03-06T02:16:28Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "to": "jecw7zzwqgx4lx", "type": "feedback", "when": "2018-03-06T03:24:41Z"}, {"anon": "no", "uid": "j9p3tttiDdhN", "to": "jecw7zzwqgx4lx", "type": "feedback", "when": "2018-03-06T09:12:56Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "data": "jefjn2va2er24n", "type": "s_answer_update", "when": "2018-03-06T11:00:52Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "to": "jecw7zzwqgx4lx", "type": "feedback", "when": "2018-03-06T11:02:19Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "to": "jecw7zzwqgx4lx", "type": "feedback", "when": "2018-03-06T15:25:56Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jeft4nhuztj70l", "type": "i_answer_update", "when": "2018-03-06T15:26:29Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "to": "jecw7zzwqgx4lx", "type": "followup", "when": "2018-03-06T15:30:42Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "to": "jecw7zzwqgx4lx", "type": "feedback", "when": "2018-03-08T04:20:44Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "data": "jei08sc558u7mo", "type": "s_answer_update", "when": "2018-03-08T04:21:11Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "80386启动后执行的第一条指令是0xfffffff0还是0xffff0&#xff1f;", "created": "2018-03-04T14:58:02Z", "content": "<p>按照我的理解&#xff0c;8086取指地址始终是(cs&lt;&lt;4)&#43;ip&#xff0c;cs初始化为0xf000&#xff0c;ip初始化为0xfff0&#xff0c;故执行的第一条指令是0xffff0&#xff1b;80386取指地址是base&#43;eip&#xff0c;base是隐藏寄存器&#xff0c;初始化为0xffff0000&#xff0c;eip初始化为0xfff0&#xff0c;故执行的第一条指令是0xfffffff0。</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html\">https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html</a> 中&#xff0c;“intel资料的说明”部分称第一条指令是0xfffffff0&#xff0c;而“单步调试和查看BIOS代码”部分称第一条指令是0xffff0&#xff0c;不一致&#xff0c;所以我怀疑“单步调试和查看BIOS代码”部分有错。此外&#xff0c;我使用gdb查看第一条指令地址时&#xff0c;gdb误认为该指令为0xfff0&#xff0c;即等于eip&#xff08;已set arch i8086&#xff09;&#xff0c;与上面两种情况均不符。所以我进一步怀疑&#xff0c;若按“单步调试和查看BIOS代码”一节操作&#xff0c;实际上无法得出正确的指令地址。</p>\n<p></p>\n<p>我进一步观察发现&#xff0c;0xffff0和0xfffffff0实际上映射到的是BIOS中同一段指令&#xff0c;所以不管指令地址是上述哪种情况&#xff0c;都可以正常运行&#xff0c;但这也导致我更无法区分事实上执行的是什么地址处的指令。此外&#xff0c;既然0xffff0和0xfffffff0映射到的是同一个位置&#xff0c;80386为什么还要采用与8086不同的第一条指令地址&#xff0c;即为什么80386不沿用0xffff0&#xff1f;</p>"}, {"anon": "no", "uid": "isx6w631skc7on", "subject": "80386启动后执行的第一条指令是0xfffffff0还是0xffff0&#xff1f;", "created": "2018-03-04T14:29:45Z", "content": "<p>按照我的理解&#xff0c;8086取指地址始终是(cs&lt;&lt;4)&#43;ip&#xff0c;cs初始化为0xf000&#xff0c;ip初始化为0xfff0&#xff0c;故执行的第一条指令是0xffff0&#xff1b;80386取指地址是base&#43;eip&#xff0c;base是隐藏寄存器&#xff0c;初始化为0xffff0000&#xff0c;eip初始化为0xfff0&#xff0c;故执行的第一条指令是0xfffffff0。</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html\">https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_5_appendix.html</a> 中&#xff0c;“intel资料的说明”部分称第一条指令是0xfffffff0&#xff0c;而“单步调试和查看BIOS代码”部分称第一条指令是0xffff0&#xff0c;不一致&#xff0c;所以我怀疑“单步调试和查看BIOS代码”部分有错。此外&#xff0c;我使用gdb查看第一条指令地址时&#xff0c;gdb误认为该指令为0xfff0&#xff0c;即等于eip&#xff08;已set arch i8086&#xff09;&#xff0c;与上面两种情况均不符。所以我进一步怀疑&#xff0c;若按“单步调试和查看BIOS代码”一节操作&#xff0c;实际上无法得出正确的指令地址。</p>\n<p></p>\n<p>我进一步观察发现&#xff0c;0xffff0和0xfffffff0实际上映射到的是BIOS中同一段指令&#xff0c;所以不管指令地址是上述哪种情况&#xff0c;都可以正常运行&#xff0c;但这也导致我更无法区分事实上执行的是什么地址处的指令。此外&#xff0c;既然0xffff0和0xfffffff0映射到的是同一个位置&#xff0c;80386为什么还要采用与8086不同的第一条指令地址&#xff0c;即为什么80386不沿用0xffff0&#xff1f;</p>"}], "type": "question", "tags": ["2018", "lab1", "student"], "tag_good": [], "unique_views": 209, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2018-03-04T14:58:44Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "jecx9a2hzvg1v5", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "", "created": "2018-03-06T15:26:29Z", "content": "<p>这个问题是被多次讨论的问题。请参见下面链接。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a> &#xff08;正解&#xff09;</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\">https://piazza.com/class/i5j09fnsl7k5x0?cid=990</a><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\"></a></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=14\">https://piazza.com/class/i5j09fnsl7k5x0?cid=14</a></p>\n<p></p>"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "", "created": "2018-03-04T14:59:02Z", "content": "<p>这个问题是被多次讨论的问题。请参见下面链接。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a> &#xff08;正解&#xff09;</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\">https://piazza.com/class/i5j09fnsl7k5x0?cid=990</a></p>"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "", "created": "2018-03-04T14:58:44Z", "content": "<p>这个问题被多次讨论的问题。请参见下面链接。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a> &#xff08;正解&#xff09;</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=990\">https://piazza.com/class/i5j09fnsl7k5x0?cid=990</a></p>"}], "type": "i_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>这两个帖子并没有解答上面的问题。</p>\n<p></p>\n<p>1. <a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=770\" target=\"_blank\">https://piazza.com/class/i5j09fnsl7k5x0?cid=770</a>  与我在上文第二自然段的理解相符&#xff0c;这是不是意味着实验指导书有错&#xff1f;</p>\n<p></p>\n<p>2. 怎么解释我在上文第三自然段提到的问题&#xff1f;</p>", "created": "2018-03-05T01:45:20Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "followup", "tag_good": [], "uid": "isx6w631skc7on", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "jedkcstiunb36t", "updated": "2018-03-05T01:45:20Z", "config": {}}, {"folders": [], "data": {"embed_links": []}, "children": [], "created": "2018-03-05T13:50:27Z", "bucket_order": 3, "tag_endorse": [{"role": "ta", "name": "Zhang Wei", "endorser": {}, "admin": true, "photo": null, "id": "isvte2o93ju2dt", "photo_url": null, "published": true, "us": false, "facebook_id": null}, {"role": "student", "name": "GuoYuanchen", "endorser": {}, "admin": false, "photo": null, "id": "isyu8by8stz6it", "photo_url": null, "published": true, "us": false, "facebook_id": null}], "bucket_name": "Today", "id": "jeea9ardrbl1l7", "history": [{"anon": "no", "uid": "isu0wqaoff5125", "subject": "", "created": "2018-03-08T04:21:11Z", "content": "<p><img src=\"/img/1137-efee82c029adc67f.jpeg\" alt=\"\" /></p>\n<p><img src=\"/img/1137-39a8b524aa65c247.jpeg\" alt=\"\" /></p>\n<p></p>\n<p>&#xff08;bochs有时候比qemu&#43;gdb好用啊&#xff09;</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html\">https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html</a> 里面好像说了第二个问题</p>\n<p></p>\n<p>这篇文章也写得很好&#xff0c;几乎解释了所有问题&#xff1a; <a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a></p>\n<p></p>\n<p> </p>"}, {"anon": "no", "uid": "isu0wqaoff5125", "subject": "", "created": "2018-03-06T11:00:52Z", "content": "<p><img src=\"/img/1137-efee82c029adc67f.jpeg\" alt=\"\" /></p>\n<p><img src=\"/img/1137-39a8b524aa65c247.jpeg\" alt=\"\" /></p>\n<p></p>\n<p>&#xff08;bochs有时候比qemu&#43;gdb好用啊&#xff09;</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html\">https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html</a> 里面好像说了第二个问题</p>\n<p></p>\n<p>这篇文章也写得很好&#xff1a; <a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a></p>\n<p></p>\n<p> </p>"}, {"anon": "no", "uid": "isu0wqaoff5125", "subject": "", "created": "2018-03-05T13:50:27Z", "content": "<p><img src=\"/img/1137-efee82c029adc67f.jpeg\" alt=\"\" /></p>\n<p><img src=\"/img/1137-39a8b524aa65c247.jpeg\" alt=\"\" /></p>\n<p></p>\n<p>&#xff08;bochs有时候比qemu&#43;gdb好用啊&#xff09;</p>\n<p></p>\n<p><a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html\">https://chyyuu.gitbooks.io/ucore_os_docs/lab1/lab1_3_1_bios_booting.html</a> 里面好像说了第二个问题</p>"}], "type": "s_answer", "tag_endorse_arr": ["isvte2o93ju2dt", "isyu8by8stz6it"], "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>twd贴的链接好像也不能解决第二个问题</p>\n<p></p>\n<blockquote>\n<p>如果把BIOS启动固件编址在0xF000起始的64KB内存地址空间内&#xff0c;就会把整个物理内存地址空间隔离成不连续的两段&#xff0c;一段是0xF000以前的地址&#xff0c;一段是1MB以后的地址&#xff0c;这很不协调。为此&#xff0c;intel采用了一个折中的方案</p>\n</blockquote>\n<p></p>\n<p>但是实际上我们观察到0xfffff0和0xfffffff0都被映射到了BIOS&#xff0c;内存还是被隔离成了不连续的两段。</p>", "created": "2018-03-05T23:54:45Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "followup", "tag_good": [], "uid": "isx6w631skc7on", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>可以改主板的设计&#xff0c;把BIOS只映射到4G-x ~ 4G&#xff1f;这样BIOS需要重写。</p>", "created": "2018-03-06T02:16:28Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "feedback", "tag_good": [], "uid": "isu0wqaoff5125", "children": [], "tag_good_arr": [], "id": "jef0wosk1dh1xu", "updated": "2018-03-06T02:16:28Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>这两段内存区域在只用20位地址线时&#xff0c;就是一样的了。这是技巧所在。</p>", "created": "2018-03-06T03:24:41Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "feedback", "tag_good": [], "uid": "hdjonbiyfs62ie", "children": [], "tag_good_arr": [], "id": "jef3cfev96s5yk", "updated": "2018-03-06T03:24:41Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p><a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a></p>\n<pre>这里貌似说的过于底层了&#xff0c;简单说就是南桥芯片拥有一张地址映射表&#xff0c;当有地址解析的请求到来时&#xff0c;南桥查看这张表决定将地址解析到何处去。这张表里有两个特殊区域&#xff0c;一个是从地址空间4G向下&#xff0c;大小从4MB到16MB不等的一个区域&#xff0c;我们以4MB为例&#xff0c;地址空间从FFFC00000h~FFFFFFFFh。称之为Range 4G。第二个区域一般是是从1MB向下128KB的范围&#xff0c;即E Segment和F Segment&#xff0c;从E0000~FFFFF&#xff0c;称之为Legacy Range&#xff0c;也就是说&#xff0c;FFFC00000h~FFFFFFFFh之间和E0000~FFFFF之间的寻址请求都会被导向到SPI/LPC&#xff0c;最终指向了BIOS。</pre>", "created": "2018-03-06T09:12:56Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "feedback", "tag_good": [], "uid": "j9p3tttiDdhN", "children": [], "tag_good_arr": [], "id": "jeffs9nm6op57z", "updated": "2018-03-06T09:12:56Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>那么看起来就是主板上面某个芯片映射的。</p>", "created": "2018-03-06T11:02:19Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "feedback", "tag_good": [], "uid": "isu0wqaoff5125", "children": [], "tag_good_arr": [], "id": "jefjoxt7r5s2s1", "updated": "2018-03-06T11:02:19Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>这个问题以前讨论过。请参见下面帖子。</p>\n<p></p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=14\">https://piazza.com/class/i5j09fnsl7k5x0?cid=14</a></p>\n<p>这里提到的下面链接给出芯片型号。</p>\n<p><a href=\"https://stackoverflow.com/questions/38442880/what-role-does-a20-line-plays-in-protected-mode\">https://stackoverflow.com/questions/38442880/what-role-does-a20-line-plays-in-protected-mode</a></p>\n<p></p>", "created": "2018-03-06T15:25:56Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "feedback", "tag_good": [], "uid": "hdjonbiyfs62ie", "children": [], "tag_good_arr": [], "id": "jeft3yh81o16ly", "updated": "2018-03-06T15:25:56Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jeevug8va7c46e", "updated": "2018-03-05T23:54:45Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>对这个问题的多次讨论和深入推敲分散在多个贴子中。我希望有同学完整地把“机器加电后的第一条指令”整理一下。谁有兴趣&#xff1f;</p>", "created": "2018-03-06T15:30:42Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "followup", "tag_good": [], "uid": "hdjonbiyfs62ie", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>上面那位同学找到的这个文章<a href=\"https://yq.aliyun.com/articles/15221\" target=\"_blank\">https://yq.aliyun.com/articles/15221</a>解释了所有的问题。</p>", "created": "2018-03-08T04:20:44Z", "bucket_order": 107, "bucket_name": "Week 3/4 - 3/10", "type": "feedback", "tag_good": [], "uid": "isu0wqaoff5125", "children": [], "tag_good_arr": [], "id": "jei087jhu2c79r", "updated": "2018-03-08T04:20:44Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jefta3bmr2t2tc", "updated": "2018-03-06T15:30:42Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jecw7zzwqgx4lx", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 5, "num_favorites": 2, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169197875, "default_anonymity": "no"}, "error": null, "aid": "kyv0ijhve7n608"}