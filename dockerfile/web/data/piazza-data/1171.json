{"result": {"folders": ["2018", "lecture6", "课堂问答"], "nr": 1171, "data": {"embed_links": []}, "created": "2018-03-22T11:22:37Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "iswj8urcumf2o2", "data": "jf2fgonfdaj75z", "type": "create", "when": "2018-03-22T11:22:37Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jf399hyrmm96hg", "to": "jf2fgondnfa75y", "type": "i_answer", "when": "2018-03-23T01:16:51Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jf39t1q18lu5ff", "type": "i_answer_update", "when": "2018-03-23T01:32:03Z"}, {"anon": "no", "uid": "je2ib5nk89v6ca", "to": "jf2fgondnfa75y", "type": "followup", "when": "2018-03-23T04:08:43Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "iswj8urcumf2o2", "subject": "256字节虚拟地址的分析与问题解答。", "created": "2018-03-22T11:22:37Z", "content": "<p>课上说的256字节虚拟内存空间的交互页面在http://blog.robertelder.org/virtual-memory-with-256-bytes-of-ram/</p>\n<p>课上&#xff0c;老师邀请我及另外一个同学&#xff08;我不记得是谁了&#xff0c;但愿他看到了这个帖子&#xff09;详细的分析这个页表的性质&#xff0c;并回答以下两个问题&#xff08;我也不记得具体的问题表述了&#xff0c;我反正做一些分析吧&#xff0c;如果问题不是这些请在下面指出&#xff0c;我在我没分析到的地方再补充&#xff09;&#xff1a;</p>\n<p>1、一级页表、二级页表占用了哪些位置&#xff1f;</p>\n<p>2、至少需要填哪几页、哪些表项&#xff1f;</p>\n<p></p>\n<p>我来回答第一个问题&#xff1a;</p>\n<p>假设这256字节的虚拟内存按照a位一级页表表项&#xff0c;b位二级页表表项&#xff0c;c位页内偏移分布&#xff0c;有a&#43;b&#43;c=8=log<sub>2</sub>(256)</p>\n<p>那么一级页表表项数为2<sup>a</sup> &#xff0c;二级页表表项数为2<sup>b</sup> &#xff0c;页表大小为2<sup>c</sup> 。</p>\n<p>假设页表基址(Top level page table pointer)为p<sub>1</sub>&#xff0c;那么一级页表占用的位置为p<sub>1</sub>~p<sub>1</sub>&#43;2<sup>a</sup> -1&#xff0c;这其中的内容若有效&#xff0c;不妨设其中某一个位置的前(8-c)位为p<sub>2 </sub>,则p<sub>2</sub> * 2<sup>c</sup> ~ p<sub>2</sub> * 2<sup>c</sup> &#43; 2<sup>b</sup> -1的位置被二级页表占用。p<sub>3</sub>页占用为p<sub>3</sub>* 2<sup>c</sup> ~&#xff08;p<sub>3</sub>&#43;1&#xff09;* 2<sup>c</sup> -1。<br />二级页表和一级页表都在某些页中&#xff0c;故最终索引到的物理地址都可能是之前索引过程中用到的。二级页表与一级页表也可能重叠&#xff0c;但是并不是所有位置都会发生重叠。当且仅当存在一整数k&#xff0c;k*2<sup>c</sup>&lt;p<sub>1</sub>&lt;k* 2<sup>c</sup> &#43; 2<sup>b</sup> -1&#xff0c;且p<sub>1</sub>~p<sub>1</sub>&#43;2<sup>a</sup> -1中某一项的前(8-c)位为k&#xff0c;一级页表的作用范围会与二级页表恰好重叠在一页的某些位置。</p>\n<p>至于三者重叠在一点的情况的条件应该是第二问的内容&#xff0c;我大概想了一下就不写在这了&#xff0c;希望课上被提问的那个同学能看到这个帖子XD</p>\n<p>实话实说&#xff0c;我的确不太记得老师的问题具体怎么描述了&#xff0c;大概分析一下&#xff0c;抛砖引玉吧&#xff0c;如果答的不对或者不符合老师的题意请老师和同学们批评指正。</p>"}], "type": "question", "tags": ["2018", "lecture6", "student", "课堂问答"], "tag_good": [{"role": "student", "name": "Qinghua Ding", "endorser": {}, "admin": false, "photo": null, "id": "izb0cd4c2tf6x0", "photo_url": null, "published": true, "us": false, "facebook_id": null}], "unique_views": 106, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2018-03-23T01:16:51Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "jf399hyk3yv6hf", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "", "created": "2018-03-23T01:32:03Z", "content": "<p>我来明确一下问题。</p>\n<p></p>\n<p>在 <a href=\"http://blog.robertelder.org/virtual-memory-with-256-bytes-of-ram/\">http://blog.robertelder.org/virtual-memory-with-256-bytes-of-ram/</a> 所示的页式存储系统中&#xff0c; 每个页面的大小为16字节&#xff0c;每个页表项的大小为1字节&#xff0c;采用二级页表结构进行页式存储的逻辑地址到物理地址的转换。</p>\n<p></p>\n<p>请问&#xff1a;</p>\n<p>1&#xff09;在该页式存储系统中&#xff0c;一级页表和各二组页表的起始逻辑地址和物理地址是多少&#xff1f;各自的长度是多少&#xff1f;</p>\n<p>2&#xff09;如果在进程创建时只初始化最小的页表项&#xff0c;需要填写哪些页表项&#xff1f;要求给出相应页表项的逻辑地址、物理地址和填写的页表项内容。</p>\n<p>3&#xff09;如果把一级页表基址(Top level page table pointer)&#xff08;物理地址&#xff09;改为0X40&#xff0c;逻辑地址指定为0X20&#xff0c;第2小问的回答是什么&#xff1f;</p>\n<p></p>\n<p>请同学们继续分析和回答。</p>"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "", "created": "2018-03-23T01:16:51Z", "content": "<p>我来明确一下问题。</p>\n<p></p>\n<p>在 <a href=\"http://blog.robertelder.org/virtual-memory-with-256-bytes-of-ram/\">http://blog.robertelder.org/virtual-memory-with-256-bytes-of-ram/</a> 所示的页式存储系统中&#xff0c; 每个页面的大小为16字节&#xff0c;每个页表项的大小为1字节&#xff0c;采用二级页表结构进行页式存储的逻辑地址到物理地址的转换。</p>\n<p></p>\n<p>请问&#xff1a;</p>\n<p>1&#xff09;在该页式存储系统中&#xff0c;一级页表和各二组页表的起始逻辑地址和物理地址是多少&#xff1f;各自的长度是多少&#xff1f;</p>\n<p>2&#xff09;如果在进程创建时只初始化最小的页表项&#xff0c;需要填写哪些页表项&#xff1f;要求给出相应页表项的逻辑地址、物理地址和填写的页表项内容。</p>\n<p></p>\n<p>请同学们继续分析和回答。</p>"}], "type": "i_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>1) 一级页表的起始逻辑地址为0x00&#xff0c;物理地址0x00&#xff0c;长度4B</p>\n<p>    二级页表的起始逻辑地址为0x00, 0x10, 0x20, 0x30&#xff0c;物理地址为0x00, 0x10, 0x20, 0x30&#xff0c;长度为4B</p>\n<p>2&#xff09;只初始化最小的页表项&#xff0c;则需要填写一级页表和其自映射的二级页表&#xff0c;以及第一个二级页表项对应的页表&#xff0c;即第0个页表</p>\n<p>   0x00  0c 00 00 00</p>\n<p>   0x04  00 00 00 00</p>\n<p>   0x08  00 00 00 00</p>\n<p>   0x0c  00 00 00 00</p>\n<p>物理地址与逻辑地址相同</p>\n<p>3) PDBR=0x40&#xff0c;逻辑地址指定为0x20,</p>\n<p>pr          lr</p>\n<p>0x20   0x40 4c 10 4c 10</p>\n<p>0x24   0x44 00 00 00 00</p>\n<p>0x28   0x48 00 00 00 00</p>\n<p>0x2c   0x4c 00 00 00 00</p>\n<p>个人思路&#xff0c;如有问题还请老师同学指正</p>", "created": "2018-03-23T04:08:43Z", "bucket_order": 106, "bucket_name": "Week 3/18 - 3/24", "type": "followup", "tag_good": [], "uid": "je2ib5nk89v6ca", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "jf3fej4m2yh5o9", "updated": "2018-03-23T04:08:43Z", "config": {}}], "tag_good_arr": ["izb0cd4c2tf6x0"], "no_answer": 0, "id": "jf2fgondnfa75y", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 4, "num_favorites": 4, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169306275, "default_anonymity": "no"}, "error": null, "aid": "kyv0kv4zdqb73k"}