{"result": {"folders": ["lab1", "lecture7", "2016", "特权级"], "nr": 276, "data": {"embed_links": []}, "created": "2015-04-10T15:25:28Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"uid": "i6sl02qfUgI", "anon": "no", "when": "2015-04-10T15:25:28Z", "data": "i8bqwjgdqje10k", "type": "create"}, {"to": "i8bqwjgarfu10j", "anon": "full", "when": "2015-04-10T16:40:34Z", "type": "followup", "uid_a": "a_0"}, {"uid": "i6sl02qfUgI", "anon": "no", "when": "2015-04-11T05:28:53Z", "data": "i8cl16jlz9q32d", "type": "update"}, {"to": "i8bqwjgarfu10j", "uid": "i6un4iacNGX", "anon": "no", "when": "2015-04-11T13:46:07Z", "type": "followup"}, {"to": "i8bqwjgarfu10j", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-04-13T01:24:51Z", "data": "i8f7725a2rzbc", "type": "i_answer"}, {"to": "i8bqwjgarfu10j", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-04-13T01:27:35Z", "type": "feedback"}, {"to": "i8bqwjgarfu10j", "uid": "hdjoucuyb836fq", "anon": "no", "when": "2015-04-13T01:29:18Z", "type": "feedback"}, {"uid": "i6sl02qfUgI", "anon": "no", "when": "2015-04-13T02:12:29Z", "data": "i8f8wbev1pm6ic", "type": "update"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "j0elipg1mpo6xo", "type": "update", "when": "2017-03-18T01:49:49Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "j0eqehtqpob19g", "type": "update", "when": "2017-03-18T04:06:30Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "关于特权级的问题", "created": "2017-03-18T04:06:30Z", "content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;=DPL[段]&#xff08;此处题目修改&#xff0c;原来是CPL&gt;DPL是我打错了抱歉……&#xff09;</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;=DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "关于特权级的问题", "created": "2017-03-18T01:49:49Z", "content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;=DPL[段]&#xff08;此处题目修改&#xff0c;原来是CPL&gt;DPL是我打错了抱歉……&#xff09;</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;=DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>"}, {"anon": "no", "uid": "i6sl02qfUgI", "subject": "关于特权级的问题", "created": "2015-04-13T02:12:29Z", "content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;=DPL[段]&#xff08;此处题目修改&#xff0c;原来是CPL&gt;DPL是我打错了抱歉……&#xff09;</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;=DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>"}, {"anon": "no", "uid": "i6sl02qfUgI", "subject": "关于特权级的问题", "created": "2015-04-11T05:28:53Z", "content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;DPL[段]</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个条件&#xff0c;CPL&gt;DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>"}, {"anon": "no", "uid": "i6sl02qfUgI", "subject": "关于特权级的问题", "created": "2015-04-10T15:25:28Z", "content": "<p>在特权级讲到CPL&#xff0c;DPL的时候提到&#xff0c;需要满足如下两个公式</p>\n<p>访问门&#xff1a;CPL&lt;=DPL[门]&amp;CPL&gt;DPL[段]</p>\n<p>访问段&#xff1a;MAX(CPL,RPL)&lt;=DPL</p>\n<p></p>\n<p>有如下几个问题&#xff1a;</p>\n<p>1.我的理解是这样的&#xff0c;CPL是我真实的特权级&#xff1b;RPL是我去访问别人的时候“假装”我有的特权级。这个理解正确吗&#xff1f;         如果正确&#xff0c;那么我“假装”的特权级别一定要比我实际的级别低吗&#xff08;即CPL&lt;=RPL&#xff09;</p>\n<p>2.访问门的第二个调节&#xff0c;CPL&gt;DPL&#xff0c;这个条件存在有什么必要吗&#xff1f;如果我的CPL特权级高过DPL反而不能访问了吗&#xff1f;&#xff08;是因为如果特权级高的话&#xff0c;就可以直接访问不需要通过门了&#xff0c;这个理由吗&#xff1f;&#xff09;</p>\n<p>3.为什么在访问门的时候&#xff0c;不像访问段的时候&#xff0c;取MAX&#xff08;CPL&#xff0c;RPL&#xff09;&#xff0c;而是直接用CPL~</p>\n<p></p>\n<p></p>\n<p>谢谢助教、老师~~</p>"}], "type": "question", "tags": ["2016", "lab1", "lecture7", "student", "特权级"], "tag_good": [], "unique_views": 178, "children": [{"anon": "full", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>我有一个类似的问题也想请教各路大神</p>\n<p>在访问门的时候特权级检查有一条为&#xff1a;CPL&lt;=DPL[门]</p>\n<p></p>\n<p></p>\n<p>但是在trap.c中的trap_init中实现为</p>\n<p>      for (i = 0; i &lt; sizeof(idt) / sizeof(struct gatedesc); i &#43;&#43;) {<br />            SETGATE(idt[i], 0, GD_KTEXT, __vectors[i], DPL_KERNEL);<br />      }<br />      SETGATE(idt[T_SYSCALL], 1, GD_KTEXT, __vectors[T_SYSCALL], DPL_USER);<br /><br /></p>\n<p></p>\n<p>只有T_SYSCALL被设置成了DPL_USER</p>\n<p>那么在用户态下&#xff0c;满足CPL&lt;=DPL[门]的只有系统调用一个是吗&#xff1f;</p>\n<p>如果在用户态下出现了缺页异常或者时钟中断之类的&#xff0c;这个检查怎么通过&#xff1f;</p>\n<p>因为这个时候CPL应该是USER的&#xff0c;但是DPL[门]都被设置成了KERNEL啊。。。。。。</p>", "created": "2015-04-10T16:40:34Z", "bucket_order": 260, "bucket_name": "Week 4/5 - 4/11", "type": "followup", "tag_good": [], "uid_a": "a_0", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>这时x86对中断/陷阱门的一个hack&#xff0c;手册里的原文&#xff08;第三卷6.12.1.1节&#xff09;&#xff1a;</p>\n<ul><li>The handler can be placed in a nonconforming code segment with privilege level 0. This handler would always run, regardless of the CPL that the interrupted program or task is running at.</li></ul>\n<p>换句话说&#xff0c;如果gate的DPL是0&#xff08;不用管conforming的事情&#xff0c;ucore中没有使用conforming code&#xff09;&#xff0c;那么就不会进行段的检查&#xff0c;直接调用中断/陷阱门中记录的处理例程。</p>", "created": "2015-04-13T01:27:35Z", "bucket_order": 259, "bucket_name": "Week 4/12 - 4/18", "type": "feedback", "tag_good": [], "uid": "hdjoucuyb836fq", "children": [], "tag_good_arr": [], "id": "i8f7akbatcr5zk", "updated": "2015-04-13T01:27:35Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i8btl4f4w0q751", "updated": "2015-04-10T16:40:34Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>网上查到的是说 RPL是请求特权等级&#xff0c;所以 CPL&#xff08;current 当前&#xff09;、RPL&#xff08;request请求&#xff09;、DPL&#xff08;destination 目标&#xff09; 这样理解是不是更合理一些&#xff1f;&#xff08;</p>", "created": "2015-04-11T13:46:07Z", "bucket_order": 260, "bucket_name": "Week 4/5 - 4/11", "type": "followup", "tag_good": [], "uid": "i6un4iacNGX", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>这也是手册中所使用的术语&#xff0c;如何理解就见仁见智了。</p>", "created": "2015-04-13T01:29:18Z", "bucket_order": 259, "bucket_name": "Week 4/12 - 4/18", "type": "feedback", "tag_good": [], "uid": "hdjoucuyb836fq", "children": [], "tag_good_arr": [], "id": "i8f7crtjfyz6pm", "updated": "2015-04-13T01:29:18Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "i8d2sm9uba6j1", "updated": "2015-04-11T13:46:07Z", "config": {}}, {"folders": [], "data": {"embed_links": []}, "children": [], "created": "2015-04-13T01:24:51Z", "bucket_order": 3, "tag_endorse": [{"role": "student", "name": "TTHJ", "endorser": {}, "admin": false, "photo": null, "id": "i6sl02qfUgI", "photo_url": null, "published": true, "us": false, "class_sections": ["清华学生_i5j09fnsl7k5x0"], "facebook_id": null}], "bucket_name": "Today", "id": "i8f77254ulqbb", "history": [{"anon": "no", "uid": "hdjoucuyb836fq", "subject": "", "created": "2015-04-13T01:24:51Z", "content": "<p>1、CPL&lt;=RPL并非必须&#xff0c;不过在访问门或段时总是用MAX(CPL, RPL)与DPL作比较&#xff0c;所以CPL&gt;RPL的情况很少见。ucore里一般都是CPL=RPL。</p>\n<p></p>\n<p>2、注意这里“DPL[门]”和“DPL[段]”是两个DPL&#xff0c;手册里的要求是CPL &gt;= DPL[段]&#xff08;请给出你的公式的出处&#xff0c;我们会尽快改正&#xff09;&#xff0c;并且没有说明为什么不允许通过门执行低级别的代码&#xff08;大概就是没有必要……&#xff09;。</p>\n<p></p>\n<p>3、实际上一般的权限测试确实使用了MAX(CPL, RPL)&#xff0c;但是我们所讨论的只包含执行中断处理例程的情况。中断发生时不存在RPL&#xff0c;所以就简化成了只检查CPL。</p>"}], "type": "i_answer", "tag_endorse_arr": ["i6sl02qfUgI"], "config": {}, "is_tag_endorse": false}], "tag_good_arr": [], "no_answer": 0, "id": "i8bqwjgarfu10j", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 8, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643167566596, "default_anonymity": "no"}, "error": null, "aid": "kyuzjksk4ee468"}