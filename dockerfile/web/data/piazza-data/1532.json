{"result": {"history_size": 1, "folders": ["logistics"], "nr": 1532, "data": {"embed_links": []}, "created": "2021-10-24T11:14:59Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "kumkzhfn5r81hf", "data": "kv54whjgqwt1ya", "v": "all", "type": "create", "when": "2021-10-24T11:14:59Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "kumkzhfn5r81hf", "subject": "关于lab5最后&#xff0c;创建好用户线程返回用户态后在initcode.s里的一些疑问", "created": "2021-10-24T11:14:59Z", "content": "<p>想请教下大家&#xff0c;这段代码的作用是什么啊。在之前load_icode里设置好用户栈之后&#xff08;把argc和argc依次装入用户栈&#xff09;&#xff0c;然后把tf的esp设置为相应的用户stacktop&#xff0c;按理说系统调用返回的时候用户栈的结构已经是维护好了&#xff0c;可以进入umain运行。</p>\n<p>但为什么还要有这一段代码呢&#xff0c;在piazza上之前看到相关的回答&#xff0c;但还是不太清楚其中的机制</p>\n<p><a href=\"/class/i5j09fnsl7k5x0\" target=\"_blank\" rel=\"noopener noreferrer\">https://piazza.com/class/i5j09fnsl7k5x0</a></p>\n<p></p>\n<p>以下是代码</p>\n<div>\n<pre>\n.globl _start\n_start:\n    # set ebp for backtrace\n    movl $0x0, %ebp\n\n    # load argc and argv\n    movl (%esp), %ebx\n    lea 0x4(%esp), %ecx\n\n\n    # move down the esp register\n    # since it may cause page fault in backtrace\n    subl $0x20, %esp\n\n    # save argc and argv on stack\n    pushl %ecx\n    pushl %ebx\n\n    # call user-program function\n    call umain\n1:  jmp 1b</pre>\n</div>"}], "type": "question", "tags": ["logistics", "student", "unanswered"], "tag_good": [], "unique_views": 106, "children": [], "tag_good_arr": [], "no_answer": 1, "id": "kv54whjcqpo1y9", "config": {"editor": "rte", "seen": {"551": 0, "760": 4, "743": 6, "1431": 1, "649": 8, "1184": 2, "529": 7, "1050": 9, "1192": 3, "1449": 5}, "has_emails_sent": 1}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 1, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643170289360, "default_anonymity": "no"}, "error": null, "aid": "kyv15xowgoz2gf"}