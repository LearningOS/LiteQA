{"result": {"folders": ["2018", "课堂问答", "lecture6"], "nr": 1161, "data": {"embed_links": []}, "created": "2018-03-16T03:48:03Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jetekzwsvg96yi", "type": "create", "when": "2018-03-16T03:48:03Z"}, {"anon": "no", "uid": "iwrjshcggpf1cz", "to": "jetekzwrovz6yh", "type": "followup", "when": "2018-03-16T06:46:50Z"}, {"anon": "no", "uid": "it1idvlzv8smt", "to": "jetekzwrovz6yh", "type": "followup", "when": "2018-03-16T06:47:27Z"}, {"anon": "no", "uid": "it1idvlzv8smt", "to": "jetekzwrovz6yh", "type": "feedback", "when": "2018-03-19T16:05:13Z"}, {"anon": "no", "uid": "iwrjshcggpf1cz", "to": "jetekzwrovz6yh", "type": "feedback", "when": "2018-03-19T16:51:12Z"}, {"anon": "no", "uid": "jshne3teufu4qt", "to": "jetekzwrovz6yh", "type": "followup", "when": "2019-03-14T01:28:05Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "jetekzwrovz6yh", "type": "followup", "when": "2019-03-16T13:15:42Z"}, {"anon": "no", "uid": "jshne3teufu4qt", "to": "jetekzwrovz6yh", "type": "feedback", "when": "2019-03-17T09:34:12Z"}, {"anon": "no", "uid": "jshne3teufu4qt", "to": "jetekzwrovz6yh", "type": "feedback", "when": "2019-03-17T09:37:34Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "2018春季-第六讲课堂实践练习一", "created": "2018-03-16T03:48:03Z", "content": "<p>有一台假想的计算机&#xff0c;页大小&#xff08;page size&#xff09;为32 Bytes&#xff0c;支持32KB的虚拟地址空间&#xff08;virtual address space&#xff09;,有4KB的物理内存空间&#xff08;physical memory&#xff09;&#xff0c;采用二级页表&#xff0c;一个页目录项&#xff08;page directory entry &#xff0c;PDE&#xff09;大小为1 Byte,一个页表项&#xff08;page-table entries PTEs&#xff09;大小为1 Byte&#xff0c;1个页目录表大小为32 Bytes&#xff0c;1个页表大小为32 Bytes。页目录基址寄存器&#xff08;page directory base register&#xff0c;PDBR&#xff09;保存了页目录表的物理地址&#xff08;按页对齐&#xff09;。</p>\n<p></p>\n<p>在物理内存模拟数据文件中&#xff0c;给出了4KB物理内存空间的值&#xff0c;请回答下列虚地址是否有合法对应的物理内存&#xff0c;请给出对应的pde index, pde contents, pte index, pte contents。</p>\n<p></p>\n<p><a href=\"https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/03-2-spoc-discussion.md#%E5%B0%8F%E7%BB%84%E6%80%9D%E8%80%83%E9%A2%98\">https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/03-2-spoc-discussion.md#%E5%B0%8F%E7%BB%84%E6%80%9D%E8%80%83%E9%A2%98</a></p>\n<p></p>\n<p>下面链接是去年的同学回答&#xff0c;供参考。请同学在给出自己的回答后&#xff0c;与参考回答进行比较&#xff0c;并说明可能的差别和原因。</p>\n<p><a href=\"https://www.piazza.com/class/i5j09fnsl7k5x0?cid=1002\">https://piazza.com/class/i5j09fnsl7k5x0?cid=1002</a></p>\n<p></p>"}], "type": "note", "tags": ["2018", "instructor-note", "lecture6", "课堂问答"], "tag_good": [], "unique_views": 136, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>杨国炜 2015011320</p>", "created": "2018-03-16T06:46:50Z", "bucket_order": 108, "bucket_name": "Week 3/11 - 3/17", "type": "followup", "tag_good": [], "uid": "iwrjshcggpf1cz", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>序号1<br /><br /></p>\n<pre>Virtual Address 0x6c74:&#xff08;11011 00011 10100&#xff09;PDBR=0x220<br /> --&gt; pde index:0x1b pde contents:0xa0 (valid 1, pfn 0x20)<br /> --&gt; pte index:0x03 pte contents:0xe1 (valid 1, pfn 0x61)<br /> --&gt; Translates to Physical Address 0xc34 --&gt; Value: 0x06 <br /><br />Virtual Address 0x6b22: &#xff08;11010 11001 00010&#xff09;<br /> --&gt; pde index:0x1a pde contents:0xd2 (valid 1, pfn 0x52)<br /> --&gt; pte index:0x19 pte contents:0xc7 (valid 1, pfn 0x47)<br /> --&gt; Translates to Physical Address 0x8e2 --&gt; Value: 0x1a</pre>\n<p>开始时出错忽略了标志位&amp;把pde和pte页号当成里物理起始地址&#xff08;同去年某同学&#xff09;</p>", "created": "2018-03-19T16:51:12Z", "bucket_order": 107, "bucket_name": "Week 3/18 - 3/24", "type": "feedback", "tag_good": [], "uid": "iwrjshcggpf1cz", "children": [], "tag_good_arr": [], "id": "jeygvo8xj325i2", "updated": "2018-03-19T16:51:12Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jetkywpjycw4u1", "updated": "2018-03-16T06:46:50Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>陈闻起 2015011356</p>", "created": "2018-03-16T06:47:27Z", "bucket_order": 108, "bucket_name": "Week 3/11 - 3/17", "type": "followup", "tag_good": [], "uid": "it1idvlzv8smt", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>序号2</p>\n<pre>Virtual Address 0x03df:\n  --&gt; pde index:0x00  pde contents:(valid 1, pfn 0x5a)\n    --&gt; pte index:0x1e  pte contents:(valid 1, pfn 0x05)\n      --&gt; Translates to Physical Address 0x0bf --&gt; Value: 0f\n\t  \nVirtual Address 0x69dc:\t  \n  --&gt; pde index:0x0e  pde contents:(valid 1, pfn 0x52)\n    --&gt; pte index:0x85  pte contents:(valid 0, pfn 0x7f)\n      --&gt; Fault (page directory entry not valid)</pre>\n<p></p>", "created": "2018-03-19T16:05:13Z", "bucket_order": 107, "bucket_name": "Week 3/18 - 3/24", "type": "feedback", "tag_good": [], "uid": "it1idvlzv8smt", "children": [], "tag_good_arr": [], "id": "jeyf8jt9tbmf", "updated": "2018-03-19T16:05:13Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jetkzpiuah33k9", "updated": "2018-03-16T06:47:27Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>潘庆霖 2016011388</p>", "created": "2019-03-14T01:28:05Z", "bucket_order": 56, "bucket_name": "Week 3/10 - 3/16", "type": "followup", "tag_good": [], "uid": "jshne3teufu4qt", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p></p><pre>the virtual addr is 0x6c74 \n    the pde index is : 0x1b, pde content is 0xa0 (valid 1, pfn 0x20)\n      the pte index is : 0x3, content is 0xe1 (valid 1, pfn 0x61) \n         the page offset is : 0x14, the paddr is 0xc34, value is 0x6 \n       \nthe virtual addr is 0x6b22 \n    the pde index is : 0x1a, pde content is 0xd2 (valid 1, pfn 0x52)\n      the pte index is : 0x19, content is 0xc7 (valid 1, pfn 0x47) \n         the page offset is : 0x2, the paddr is 0x8e2, value is 0x1a \n       \nthe virtual addr is 0x3df \n    the pde index is : 0x0, pde content is 0xda (valid 1, pfn 0x5a)\n      the pte index is : 0x1e, content is 0x85 (valid 1, pfn 0x5) \n         the page offset is : 0x1f, the paddr is 0xbf, value is 0xf \n       \nthe virtual addr is 0x69dc \n    the pde index is : 0x1a, pde content is 0xd2 (valid 1, pfn 0x52)\n      the pte index is : 0xe, content is 0x7f (valid 0, pfn 0x7f) \n         Fault (page directory entry not valid)\n\nthe virtual addr is 0x317a \n    the pde index is : 0xc, pde content is 0x98 (valid 1, pfn 0x18)\n      the pte index is : 0xb, content is 0xb5 (valid 1, pfn 0x35) \n         the page offset is : 0x1a, the paddr is 0x6ba, value is 0x1e \n       \nthe virtual addr is 0x4546 \n    the pde index is : 0x11, pde content is 0xa1 (valid 1, pfn 0x21)\n      the pte index is : 0xa, content is 0x7f (valid 0, pfn 0x7f) \n         Fault (page directory entry not valid)\n\nthe virtual addr is 0x2c03 \n    the pde index is : 0xb, pde content is 0xc4 (valid 1, pfn 0x44)\n      the pte index is : 0x0, content is 0xd7 (valid 1, pfn 0x57) \n         the page offset is : 0x3, the paddr is 0xae3, value is 0x16 \n       \nthe virtual addr is 0x7fd7 \n    the pde index is : 0x1f, pde content is 0x92 (valid 1, pfn 0x12)\n      the pte index is : 0x1e, content is 0x7f (valid 0, pfn 0x7f) \n         Fault (page directory entry not valid)\n\nthe virtual addr is 0x390e \n    the pde index is : 0xe, pde content is 0x7f (valid 0, pfn 0x7f)\n      Fault (page directory entry not valid)\n\nthe virtual addr is 0x748b \n    the pde index is : 0x1d, pde content is 0x80 (valid 1, pfn 0x0)\n      the pte index is : 0x4, content is 0x7f (valid 0, pfn 0x7f) \n         Fault (page directory entry not valid)</pre>\n<p></p>", "created": "2019-03-17T09:34:12Z", "bucket_order": 55, "bucket_name": "Week 3/17 - 3/23", "type": "feedback", "tag_good": [], "uid": "jshne3teufu4qt", "children": [], "tag_good_arr": [], "id": "jtcq3wobwmz6y2", "updated": "2019-03-17T09:34:12Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p></p>\n<pre>use std::fs;\n\nfn main() {\n    let mut pde_index : u8;\n    let mut pte_index : u8;\n    let mut page_offset : u8;\n\n    let mut pde_content : u8;\n    let mut pde_valid : u8;\n    let mut pde_addr : u8;\n\n    let mut pte_content : u8;\n    let mut pte_valid : u8;\n    let mut pte_addr : u8;\n\n    let mut paddr : u16;\n    let mut value : u8;\n\n    // load memory information\n    let contents = fs::read_to_string(&#34;memory.txt&#34;)\n                .expect(&#34;Something went wrong reading the file&#34;);\n    let mut mem = Vec::new();\n    let split = contents.as_str().split(&#34;\\n&#34;);\n    for s in split {\n        mem.push(s.split(&#34; &#34;).collect::&lt;Vec&lt;&amp;str&gt;&gt;());\n    }\n\n    let vec : Vec&lt;u16&gt; = vec![0x6c74, 0x6b22, 0x03df, 0x69dc, 0x317a, 0x4546, 0x2c03, 0x7fd7, 0x390e, 0x748b];\n\n    for addr in vec.into_iter() {\n        print!(&#34;\\nthe virtual addr is {:#x} \\n    &#34;, addr);\n\n        //parse the virtual addr\n        pde_index  = (addr &gt;&gt; 10) as u8;\n        pte_index  = ((addr &lt;&lt; 6) &gt;&gt; 11) as u8;\n        page_offset  = (addr % 32) as u8;\n\n        //get pde\n        pde_content = parse_str(mem[0x11][2 &#43; pde_index as usize]);\n        pde_valid = pde_content &gt;&gt; 7;\n        pde_addr = pde_content - (pde_valid &lt;&lt; 7);\n\n        //get pte\n        pte_content = parse_str(mem[pde_addr as usize][2&#43; pte_index as usize]);\n        pte_valid = pte_content &gt;&gt; 7;\n        pte_addr = pte_content - (pte_valid &lt;&lt; 7);\n\n        //get physical address and value stored in it\n        paddr = ((pte_addr as u16) &lt;&lt; 5) &#43; page_offset as u16;\n        value = parse_str(mem[(paddr &gt;&gt; 5) as usize][2 &#43; (paddr % 32) as usize]);\n\n        print!(&#34;the pde index is : {:#x}, pde content is {:#x} (valid {}, pfn {:#x})\\n      &#34;, pde_index, pde_content, pde_valid, pde_addr);\n        if pde_valid != 0 {\n            print!(&#34;the pte index is : {:#x}, content is {:#x} (valid {}, pfn {:#x}) \\n         &#34;, pte_index, pte_content, pte_valid, pte_addr);\n        }else{\n            println!(&#34;Fault (page directory entry not valid)&#34;);\n            continue;\n        }\n        if pte_valid != 0 {\n            print!(&#34;the page offset is : {:#x}, the paddr is {:#x}, value is {:#x} \\n       &#34;, page_offset, paddr, value);\n        }else{\n            println!(&#34;Fault (page directory entry not valid)&#34;);\n            continue;\n        }\n    }\n}\n\n// convert str to number, such as &#39;1b&#39; =&gt; 27_u8\nfn parse_str(s : &amp;str) -&gt; u8 {\n    let mut res : u8 = 0;\n    for ch in s.bytes() {\n        res = (res &lt;&lt; 4) &#43; parse_char(ch);\n    }\n    res\n}\n    \n// convert char to number\nfn parse_char(ch : u8) -&gt; u8 {\n    match ch {\n        b&#39;0&#39;=&gt; 0,\n        b&#39;1&#39;=&gt; 1,\n        b&#39;2&#39;=&gt; 2,\n        b&#39;3&#39;=&gt; 3,\n        b&#39;4&#39;=&gt; 4,\n        b&#39;5&#39;=&gt; 5,\n        b&#39;6&#39;=&gt; 6,\n        b&#39;7&#39;=&gt; 7,\n        b&#39;8&#39;=&gt; 8,\n        b&#39;9&#39;=&gt; 9,\n        b&#39;a&#39;=&gt; 10,\n        b&#39;b&#39;=&gt; 11,\n        b&#39;c&#39;=&gt; 12,\n        b&#39;d&#39;=&gt; 13,\n        b&#39;e&#39;=&gt; 14,\n        b&#39;f&#39;=&gt; 15,\n        _ =&gt; 0\n    }\n}</pre>\n<p></p>", "created": "2019-03-17T09:37:34Z", "bucket_order": 55, "bucket_name": "Week 3/17 - 3/23", "type": "feedback", "tag_good": [], "uid": "jshne3teufu4qt", "children": [], "tag_good_arr": [], "id": "jtcq88sz6rz3ks", "updated": "2019-03-17T09:37:34Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jt7yf7l7pv5lq", "updated": "2019-03-14T01:28:05Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p><md><br />&#96;&#96;&#96;c#<br />virtual address 0x6c74:<br />    pde index:0x1b  pde contents:0xa0(valid 1, pfn 0x20)<br />        --&gt; pte index:0x3  pte contents:0xe1:(valid 1, pfn 0x61)<br />            --&gt; Translates to Physical Address 0x0 --&gt; Value: 0x6<br /><br />virtual address 0x6b22:<br />    pde index:0x1a  pde contents:0xd2(valid 1, pfn 0x52)<br />        --&gt; pte index:0x19  pte contents:0xc7:(valid 1, pfn 0x47)<br />            --&gt; Translates to Physical Address 0x0 --&gt; Value: 0x1a<br /><br />virtual address 0x3df:<br />    pde index:0x0  pde contents:0xda(valid 1, pfn 0x5a)<br />        --&gt; pte index:0x1e  pte contents:0x85:(valid 1, pfn 0x5)<br />            --&gt; Translates to Physical Address 0x0 --&gt; Value: 0xf<br /><br />virtual address 0x69dc:<br />    pde index:0x1a  pde contents:0xd2(valid 1, pfn 0x52)<br />        --&gt; pte index:0xe  pte contents:0x7f:(valid 0, pfn 0x7f)<br />            --&gt; Fault (page directory entry not valid)<br /><br />virtual address 0x317a:<br />    pde index:0xc  pde contents:0x98(valid 1, pfn 0x18)<br />        --&gt; pte index:0xb  pte contents:0xb5:(valid 1, pfn 0x35)<br />            --&gt; Translates to Physical Address 0x0 --&gt; Value: 0x1e<br /><br />virtual address 0x4546:<br />    pde index:0x11  pde contents:0xa1(valid 1, pfn 0x21)<br />        --&gt; pte index:0xa  pte contents:0x7f:(valid 0, pfn 0x7f)<br />            --&gt; Fault (page directory entry not valid)<br /><br />virtual address 0x2c03:<br />    pde index:0xb  pde contents:0xc4(valid 1, pfn 0x44)<br />        --&gt; pte index:0x0  pte contents:0xd7:(valid 1, pfn 0x57)<br />            --&gt; Translates to Physical Address 0x0 --&gt; Value: 0x16<br /><br />virtual address 0x7fd7:<br />    pde index:0x1f  pde contents:0x92(valid 1, pfn 0x12)<br />        --&gt; pte index:0x1e  pte contents:0x7f:(valid 0, pfn 0x7f)<br />            --&gt; Fault (page directory entry not valid)<br /><br />virtual address 0x390e:<br />    pde index:0xe  pde contents:0x7f(valid 0, pfn 0x7f)<br />        --&gt; Fault (page directory entry not valid)<br /><br />virtual address 0x748b:<br />    pde index:0x1d  pde contents:0x80(valid 1, pfn 0x0)<br />        --&gt; pte index:0x4  pte contents:0x7f:(valid 0, pfn 0x7f)<br />            --&gt; Fault (page directory entry not valid)<br /><br />&#96;&#96;&#96;<br /><br />&#96;&#96;&#96;python<br /># read mem into table[][]<br />def read_mem(fileame):<br />    table = []<br />    mem = open(fileame, &#34;r&#34;)<br />    for line in mem:<br />        entrys = (line.split())[2:]<br />        page = []<br />        for entry in entrys:<br />            page.append(int(entry, 16))<br />        table.append(page)<br />    mem.close()<br />    return table<br /><br /><br />def find(table, vadd, pd):<br />    ans = &#34;virtual address 0x%x:\\n\\t&#34; % vadd<br />    # spilt virtual address  [pdei : ptei : offset]<br />    offset = vadd &amp; 0x1f<br />    vadd &gt;&gt;= 5<br />    ptei = vadd &amp; 0x1f<br />    vadd &gt;&gt;= 5<br />    pdei = vadd &amp; 0x1f<br />    # get pde<br />    pde = pd[pdei]<br />    pdev = (pde &amp; 0x80) &gt;&gt; 7<br />    pdea = pde &amp; 0x7f<br />    ans &#43;= &#34;pde index:0x%x  pde contents:0x%x(valid %d, pfn 0x%x)\\n\\t\\t&#34; % (pdei, pde, pdev, pdea)<br />    if pdev == 0:<br />        ans &#43;= &#34;--&gt; Fault (page directory entry not valid)\\n&#34;<br />        return ans<br />    # get pte<br />    pte = table[pdea][ptei]<br />    ptev = (pte &amp; 0x80) &gt;&gt; 7<br />    ptea = pte &amp; 0x7f<br />    ans &#43;= &#34;--&gt; pte index:0x%x  pte contents:0x%x:(valid %d, pfn 0x%x)\\n\\t\\t\\t&#34; % (ptei, pte, ptev, ptea)<br />    if ptev == 0:<br />        ans &#43;= &#34;--&gt; Fault (page directory entry not valid)\\n&#34;<br />        return ans<br />    # get value<br />    padd = (ptea &lt;&lt; 5) &amp; offset &amp; 0x1f<br />    value = table[ptea][offset]<br />    ans &#43;= &#34;--&gt; Translates to Physical Address 0x%x --&gt; Value: 0x%x\\n&#34; % (padd, value)<br />    return ans<br /><br /><br />fileame = &#34;memory.txt&#34;<br />table = read_mem(fileame)<br />pdbr = 0x220<br />pd = table[pdbr &gt;&gt; 5]<br />str = &#34;&#34;&#34;<br />Virtual Address 6c74<br />Virtual Address 6b22<br />Virtual Address 03df<br />Virtual Address 69dc<br />Virtual Address 317a<br />Virtual Address 4546<br />Virtual Address 2c03<br />Virtual Address 7fd7<br />Virtual Address 390e<br />Virtual Address 748b<br />&#34;&#34;&#34;<br />str = str.split()<br />i = 2<br />while i &lt; len(str):<br />    print(find(table, int(str[i], 16), pd))<br />    i &#43;= 3<br /><br />&#96;&#96;&#96;<br /></md></p>", "created": "2019-03-16T13:15:42Z", "bucket_order": 56, "bucket_name": "Week 3/10 - 3/16", "type": "followup", "tag_good": [], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "jtbikwttman69s", "updated": "2019-03-16T13:15:42Z", "config": {}}], "tag_good_arr": [], "id": "jetekzwrovz6yh", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 5, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169271178, "default_anonymity": "no"}, "error": null, "aid": "kyv0k422ees4ch"}