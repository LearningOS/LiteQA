{"result": {"folders": ["lecture11"], "nr": 740, "data": {"embed_links": []}, "created": "2016-03-27T03:26:30Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"uid": "i0et95bli7r7ky", "anon": "no", "when": "2016-03-27T03:26:30Z", "data": "ima07sp54am3wf", "type": "create"}, {"to": "ima07sp3fgc3we", "uid": "i0f9pvv0uxm6ko", "anon": "no", "when": "2016-03-27T03:50:12Z", "data": "ima12a10p8w48p", "type": "s_answer"}, {"uid": "i0f9pvv0uxm6ko", "anon": "no", "when": "2016-03-27T03:54:17Z", "data": "ima17ihoq477fh", "type": "s_answer_update"}, {"uid": "hzx4nrqzey8768", "anon": "no", "when": "2016-03-27T04:01:55Z", "data": "ima1hby3cs46hx", "type": "s_answer_update"}, {"to": "ima07sp3fgc3we", "uid": "hzx4nrqzey8768", "anon": "no", "when": "2016-03-27T04:08:09Z", "type": "followup"}, {"to": "ima07sp3fgc3we", "uid": "hcrrjuyequh4bt", "anon": "no", "when": "2016-03-27T12:18:03Z", "data": "imaj7dnbxck6iu", "type": "i_answer"}, {"to": "ima07sp3fgc3we", "uid": "i0b2fq3ezjw50r", "anon": "no", "when": "2016-03-27T16:19:32Z", "type": "followup"}, {"to": "ima07sp3fgc3we", "uid": "hzx4nrqzey8768", "anon": "no", "when": "2016-03-27T16:44:30Z", "type": "feedback"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "i0et95bli7r7ky", "subject": "fork()返回值的问题", "created": "2016-03-27T03:26:30Z", "content": "<p></p><p>关于创建新进程的描述正确的是&#xff08;&#xff09; s2</p>\n<ul><li>[x] fork() 创建子进程中&#xff0c;会复制父进程的所有变量和内存</li><li>[x] 子进程的fork()返回0</li><li>[x] 父进程的fork()在创建子进程成功后&#xff0c;返回子进程标识符</li><li>[x] fork() 创建子进程中&#xff0c;会复制父进程的页表</li></ul>\n<p></p>\n<p>我的理解&#xff1a;fork之后得到的子进程&#xff0c;会直接从fork的下一条语句开始执行&#xff0c;为什么存在子进程的fork返回值呢&#xff1f;</p>\n<p>以及&#xff0c;fork() == 0的时候&#xff0c;不是表明这是父进程吗&#xff1f;跟bc正好反了&#xff1f;</p>\n<p></p>\n<p>希望得到解答&#xff0c;谢谢&#xff01;</p>"}], "type": "question", "tags": ["lecture11", "student"], "tag_good": [], "unique_views": 121, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2016-03-27T03:50:12Z", "bucket_order": 3, "tag_endorse": [{"role": "student", "name": "叶雨菲-2013011325", "endorser": {}, "admin": false, "photo": null, "id": "i0et95bli7r7ky", "photo_url": null, "published": true, "us": false, "class_sections": ["清华学生_i5j09fnsl7k5x0"], "facebook_id": null}], "bucket_name": "Today", "id": "ima12a0xbxi48o", "history": [{"anon": "no", "uid": "hzx4nrqzey8768", "subject": "", "created": "2016-03-27T04:01:55Z", "content": "<p>和其他用户态库函数一样&#xff0c;fork()需要调用int 0x80&#xff08;syscall&#xff09;&#xff0c;此时子进程的所谓的下一条语句是syscall的后一条语句&#xff08;准确来说&#xff0c;一个进程的第一条语句一定是构造中断帧用以从内核态返回用户态&#xff0c;这里说的下一条语句是指返回后的第一条&#xff09;&#xff0c;这时候fork()还没有返回。这里子进程fork()返回的是进程初始化到可运行的值&#xff0c;这个值为0。</p>\n<p>而父进程由于在内核态执行了生成子进程等一系列的操作&#xff0c;这些操作也会最终在syscall后产生一个返回值&#xff0c;内核将这个返回值实现为pid。</p>"}, {"anon": "no", "uid": "i0f9pvv0uxm6ko", "subject": "", "created": "2016-03-27T03:54:17Z", "content": "<p>和其他用户态库函数一样&#xff0c;fork()需要调用int 0x80&#xff08;syscall&#xff09;&#xff0c;此时子进程的所谓的下一条语句是syscall的后一条语句&#xff08;准确来说&#xff0c;一个进程的第一条语句一定是构造中断帧用以从内核态返回用户态&#xff0c;这里说的下一条语句是指返回后的第一条&#xff09;&#xff0c;这时候fork()还没有返回。这里子进程fork()返回的是进程初始化到可运行的值&#xff0c;这个值为0。</p>\n<p>而父进程由于在内核态执行了生成子进程等一系列的操作&#xff0c;这些操作也会最终在syscall后产生一个返回值&#xff0c;内核将这个返回值实现为pid。</p>"}, {"anon": "no", "uid": "i0f9pvv0uxm6ko", "subject": "", "created": "2016-03-27T03:50:12Z", "content": "<p>和其他用户态库函数一样&#xff0c;fork()需要调用int 0x80&#xff08;syscall&#xff09;&#xff0c;此时子进程的所谓的下一条语句是syscall的后一条语句&#xff0c;这时候fork()还没有返回。这里子进程fork()返回的是进程初始化到可运行的值&#xff0c;这个值为0。</p>\n<p>而父进程由于在内核态执行了生成子进程等一系列的操作&#xff0c;这些操作也会最终在syscall后产生一个返回值&#xff0c;内核将这个返回值实现为pid。</p>"}], "type": "s_answer", "tag_endorse_arr": ["i0et95bli7r7ky"], "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>哎&#xff0c;刚刚写了一个几百字的答案&#xff0c;一提交&#xff0c;没了。。。。。</p>\n<p>算了&#xff0c;李宇轩回答的已经很正确了&#xff0c;我就补充一句&#xff0c;就是 fork() 对于用户程序来讲&#xff0c;就是一个普通的系统调用&#xff0c;该有返回值还有返回值&#xff0c;不存在“跳转到下一条语句开始执行”的问题。fork() 一执行&#xff0c;会立刻复制当前进程一份&#xff0c;然后这俩进程同时开始继续执行&#xff0c;唯一的区别是&#xff0c;返回值在父进程中是大于0的&#xff0c;意思是子进程的 pid&#xff0c;返回值在子进程中等于 0。通过这个来区别父子进程。</p>", "created": "2016-03-27T04:08:09Z", "bucket_order": 232, "bucket_name": "Week 3/20 - 3/26", "type": "followup", "tag_good": [], "uid": "hzx4nrqzey8768", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "ima1pcy9qp7va", "updated": "2016-03-27T04:08:09Z", "config": {}}, {"folders": [], "data": {"embed_links": []}, "children": [], "created": "2016-03-27T12:18:03Z", "bucket_order": 3, "tag_endorse": [{"role": "student", "name": "叶雨菲-2013011325", "endorser": {}, "admin": false, "photo": null, "id": "i0et95bli7r7ky", "photo_url": null, "published": true, "us": false, "class_sections": ["清华学生_i5j09fnsl7k5x0"], "facebook_id": null}], "bucket_name": "Today", "id": "imaj7dnayqz6it", "history": [{"anon": "no", "uid": "hcrrjuyequh4bt", "subject": "", "created": "2016-03-27T12:18:03Z", "content": "<p>叶雨菲&#xff0c;你是在C语言的级别考虑fork返回后的下一条语句。而李宇轩是在汇编语言的级别考虑fork返回后的下一条语句&#xff0c;即inte 0x80后的那条汇编语句。这两个语句是不一样的。</p>"}], "type": "i_answer", "tag_endorse_arr": ["i0et95bli7r7ky"], "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>我记得&#xff0c;fork返回的是 此进程下一个子进程的pid</p>\n<p>也就是说&#xff0c;系统的所有进程是一个链表或者树&#xff08;你可以这样理解&#xff09;&#xff0c;父亲指向儿子</p>\n<p>所以父进程返回的是子进程的pid&#xff0c;而子进程刚刚出生&#xff0c;还没有孩子&#xff0c;所以返回的就是0啦</p>", "created": "2016-03-27T16:19:32Z", "bucket_order": 231, "bucket_name": "Week 3/27 - 4/2", "type": "followup", "tag_good": [], "uid": "i0b2fq3ezjw50r", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>其实是儿子指向父亲的&#xff0c;在 linux 里&#xff0c;除非把所有进程枚举一遍&#xff0c;否则没啥靠谱的方法把自己的所有子进程找出来。</p>\n<p></p>\n<p>不过现在有 cgroup 则另当别论了</p>", "created": "2016-03-27T16:44:30Z", "bucket_order": 231, "bucket_name": "Week 3/27 - 4/2", "type": "feedback", "tag_good": [], "uid": "hzx4nrqzey8768", "children": [], "tag_good_arr": [], "id": "imasq0ti9ur330", "updated": "2016-03-27T16:44:30Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "imartwulz2621m", "updated": "2016-03-27T16:19:32Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "ima07sp3fgc3we", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 7, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643168379895, "default_anonymity": "no"}, "error": null, "aid": "kyv010c7cql77p"}