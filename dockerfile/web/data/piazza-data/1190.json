{"result": {"history_size": 3, "folders": ["lecture11", "课堂问答", "2018"], "nr": 1190, "data": {"embed_links": []}, "created": "2018-04-06T17:59:59Z", "bucket_order": 3, "no_answer_followup": 1, "change_log": [{"anon": "no", "uid": "ietb1e89azd2e8", "data": "jfo99glnd8d4a6", "type": "create", "when": "2018-04-06T17:59:59Z"}, {"anon": "no", "uid": "ietb1e89azd2e8", "data": "jfo9aoa4agy59d", "type": "update", "when": "2018-04-06T18:00:55Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "to": "jfo99gk811j4a5", "type": "followup", "when": "2018-04-08T12:04:19Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jjgxrozjqza7k", "type": "update", "when": "2018-07-11T09:42:40Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "编程实现的多线程是用户多线程还是内核多线程", "created": "2018-07-11T09:42:40Z", "content": "<p>问题&#xff1a;在本周二的操作系统课程上&#xff0c;老师提问&#xff1a;在使用一些多线程库编程实现的多线程程序中&#xff0c;实现的到底是用户多线程还是内核多线程&#xff1f;<br /><br />解决思路&#xff1a;<br />1. 创建两个线程 Thread-1, Thread-2.<br />2. 将Thread-1 sleep&#xff0c;使其进入内核态。<br />3. 在Thread-2 中调用print中断。<br />若此时Thread-2可以成功print&#xff0c;则说明Thread-2可以进入内核态&#xff0c;此时Thread-1、Thread-2同时在内核态&#xff0c;实现的是内核多线程。若不能print&#xff0c;说明Thread-1将这个进程阻塞&#xff0c;实现的是用户多线程。<br /><br />使用Python&#xff0c;编程实现如下&#xff1a;</p>\n<pre>#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n\nimport thread\nimport time\n\n\ndef print_time(threadName, delay):\n    count = 0\n    while count &lt; 5:\n        time.sleep(delay)\n        count &#43;= 1\n        print &#34;%s: %s&#34; % (threadName, time.ctime(time.time()))\n\ndef sleep_thread(threadName, delay):\n    print &#34;%s sleep: %s&#34; % (threadName, time.ctime(time.time()))\n    time.sleep(delay)\n    print &#34;%s wake: %s&#34; % (threadName, time.ctime(time.time()))\n\ntry:\n    thread.start_new_thread(sleep_thread, (&#34;Thread-1&#34;, 10,))\n    thread.start_new_thread(print_time, (&#34;Thread-2&#34;, 2,))\n\nexcept:\n    print &#34;Error: unable to start thread&#34;\n\nwhile 1:\n    pass</pre>\n<p><br />得到输出如下&#xff1a;<br />Thread-1 sleep: Sat Apr 7 01:40:46 2018<br />Thread-2: Sat Apr 7 01:40:48 2018<br />Thread-2: Sat Apr 7 01:40:50 2018<br />Thread-2: Sat Apr 7 01:40:52 2018<br />Thread-2: Sat Apr 7 01:40:54 2018<br />Thread-1 wake: Sat Apr 7 01:40:56 2018<br />Thread-2: Sat Apr 7 01:40:56 2018<br /><br />说明Thread-1, Thread-2可以同时进入内核态&#xff0c;实现的为内核多线程。<br /><br /></p>"}, {"anon": "no", "uid": "ietb1e89azd2e8", "subject": "编程实现的多线程是用户多线程还是内核多线程", "created": "2018-04-06T18:00:55Z", "content": "<p>问题&#xff1a;在本周二的操作系统课程上&#xff0c;老师提问&#xff1a;在使用一些多线程库编程实现的多线程程序中&#xff0c;实现的到底是用户多线程还是内核多线程&#xff1f;<br /><br />解决思路&#xff1a;<br />1. 创建两个线程 Thread-1, Thread-2.<br />2. 将Thread-1 sleep&#xff0c;使其进入内核态。<br />3. 在Thread-2 中调用print中断。<br />若此时Thread-2可以成功print&#xff0c;则说明Thread-2可以进入内核态&#xff0c;此时Thread-1、Thread-2同时在内核态&#xff0c;实现的是内核多线程。若不能print&#xff0c;说明Thread-1将这个进程阻塞&#xff0c;实现的是用户多线程。<br /><br />使用Python&#xff0c;编程实现如下&#xff1a;</p>\n<pre>#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n\nimport thread\nimport time\n\n\ndef print_time(threadName, delay):\n    count = 0\n    while count &lt; 5:\n        time.sleep(delay)\n        count &#43;= 1\n        print &#34;%s: %s&#34; % (threadName, time.ctime(time.time()))\n\ndef sleep_thread(threadName, delay):\n    print &#34;%s sleep: %s&#34; % (threadName, time.ctime(time.time()))\n    time.sleep(delay)\n    print &#34;%s wake: %s&#34; % (threadName, time.ctime(time.time()))\n\ntry:\n    thread.start_new_thread(sleep_thread, (&#34;Thread-1&#34;, 10,))\n    thread.start_new_thread(print_time, (&#34;Thread-2&#34;, 2,))\n\nexcept:\n    print &#34;Error: unable to start thread&#34;\n\nwhile 1:\n    pass</pre>\n<p><br />得到输出如下&#xff1a;<br />Thread-1 sleep: Sat Apr 7 01:40:46 2018<br />Thread-2: Sat Apr 7 01:40:48 2018<br />Thread-2: Sat Apr 7 01:40:50 2018<br />Thread-2: Sat Apr 7 01:40:52 2018<br />Thread-2: Sat Apr 7 01:40:54 2018<br />Thread-1 wake: Sat Apr 7 01:40:56 2018<br />Thread-2: Sat Apr 7 01:40:56 2018<br /><br />说明Thread-1, Thread-2可以同时进入内核态&#xff0c;实现的为内核多线程。<br /><br /></p>"}, {"anon": "no", "uid": "ietb1e89azd2e8", "subject": "编程实现的多线程是用户多线程还是内核多线程", "created": "2018-04-06T17:59:59Z", "content": "<p>问题&#xff1a;在本周二的操作系统课程上&#xff0c;老师提问&#xff1a;在使用一些多线程库编程实现的多线程程序中&#xff0c;实现的到底是用户多线程还是内核多线程&#xff1f;<br /><br />解决思路&#xff1a;<br />1. 创建两个线程 Thread-1, Thread-2.<br />2. 将Thread-1 sleep&#xff0c;使其进入内核态。<br />3. 在Thread-2 中调用print中断。<br />若此时Thread-2可以成功print&#xff0c;则说明Thread-2可以进入内核态&#xff0c;此时Thread-1、Thread-2同时在内核态&#xff0c;实现的是内核多线程。若不能print&#xff0c;说明Thread-1将这个进程阻塞&#xff0c;实现的是用户多线程。<br /><br />使用Python&#xff0c;编程实现如下&#xff1a;</p>\n<pre>#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n\nimport thread\nimport time\n\n\ndef print_time(threadName, delay):\n    count = 0\n    while count &lt; 5:\n        time.sleep(delay)\n        count &#43;= 1\n        print &#34;%s: %s&#34; % (threadName, time.ctime(time.time()))\n\ndef sleep_thread(threadName, delay):\n    print &#34;%s sleep: %s&#34; % (threadName, time.ctime(time.time()))\n    time.sleep(delay)\n    print &#34;%s wake: %s&#34; % (threadName, time.ctime(time.time()))\n\ntry:\n    thread.start_new_thread(sleep_thread, (&#34;Thread-1&#34;, 10,))\n    thread.start_new_thread(print_time, (&#34;Thread-2&#34;, 2,))\n\nexcept:\n    print &#34;Error: unable to start thread&#34;\n\nwhile 1:\n    pass</pre>\n<p><br />得到输出如下&#xff1a;<br />Thread-1 sleep: Sat Apr 7 01:40:46 2018<br />Thread-2: Sat Apr 7 01:40:48 2018<br />Thread-2: Sat Apr 7 01:40:50 2018<br />Thread-2: Sat Apr 7 01:40:52 2018<br />Thread-2: Sat Apr 7 01:40:54 2018<br />Thread-1 wake: Sat Apr 7 01:40:56 2018<br />Thread-2: Sat Apr 7 01:40:56 2018<br /><br />说明Thread-1, Thread-2可以同时进入内核态&#xff0c;实现的为内核多线程。<br /><br /></p>"}], "type": "note", "tags": ["2018", "lecture11", "student", "unanswered", "课堂问答"], "tag_good": [], "unique_views": 121, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p></p><p>time.sleep是系统调用的sleep吗&#xff1f;</p>", "created": "2018-04-08T12:04:19Z", "bucket_order": 139, "bucket_name": "Week 4/8 - 4/14", "type": "followup", "tag_good": [], "uid": "isu0wqaoff5125", "children": [], "tag_good_arr": [], "no_answer": 1, "id": "jfqrfs2273g7bh", "updated": "2018-04-08T12:04:19Z", "config": {}}], "tag_good_arr": [], "id": "jfo99gk811j4a5", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 3, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169357809, "default_anonymity": "no"}, "error": null, "aid": "kyv0lywh80s3p3"}