{"result": {"folders": ["lab4", "lecture13", "课堂问答", "2017"], "nr": 1036, "data": {"embed_links": []}, "created": "2017-04-10T08:08:39Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "hdjonbiyfs62ie", "data": "j1bu6htaxem28b", "type": "create", "when": "2017-04-10T08:08:39Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "j1bu7689n3265r", "type": "update", "when": "2017-04-10T08:09:11Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "data": "j1buii81u47206", "type": "update", "when": "2017-04-10T08:18:00Z"}, {"anon": "full", "to": "j1bu6ht8tz828a", "type": "followup", "when": "2017-04-11T01:36:33Z", "uid_a": "a_0"}, {"anon": "no", "uid": "isvxeq6bspf1vn", "to": "j1bu6ht8tz828a", "type": "followup", "when": "2018-04-17T01:04:28Z"}, {"anon": "no", "uid": "im0vq5pac4t1xa", "to": "j1bu6ht8tz828a", "type": "followup", "when": "2018-04-17T01:31:33Z"}, {"anon": "no", "uid": "isvxeq6bspf1vn", "to": "j1bu6ht8tz828a", "type": "feedback", "when": "2018-04-18T11:30:10Z"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "to": "j1bu6ht8tz828a", "type": "feedback", "when": "2018-04-20T03:46:13Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "2017春季-第十三讲课堂实践练习(1)", "created": "2017-04-10T08:18:00Z", "content": "<p>请两人一组完成“第十三讲 实验四 内核线程管理”中指定小题的回答在此贴中回复&#xff0c;每组同学选做一个数据结构分析和一个流程分析。</p>\n<p></p>\n<p>题目&#xff1a;<br /><a href=\"https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html\">https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html</a></p>\n<p><br />视频相关思考题 -&gt; 13.2 关键数据结构 -&gt; 第1小题</p>\n<p></p>\n<p>分析proc_struct数据结构&#xff0c;说明每个字段的用途&#xff0c;是线程控制块或进程控制块的&#xff0c;会在哪些函数中修改。</p>"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "2017春季-第十三讲课堂实践练习(1)", "created": "2017-04-10T08:09:11Z", "content": "<p>请两人一组完成“第十三讲 实验四 内核线程管理”中指定小题的回答在此贴中回复&#xff0c;每组同学选做一个数据结构分析和一个流程分析。</p>\n<p></p>\n<p>题目&#xff1a;<br /><a href=\"https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html\">https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html</a></p>\n<p><br />视频相关思考题 -&gt; 13.2 关键数据结构 -&gt; 第1小题</p>\n<p></p>\n<p>分析proc_struct数据结构&#xff0c;说明每个字段的用途&#xff0c;是线程控制块或进程控制块的&#xff0c;会在哪些函数中修改。</p>"}, {"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "2017春季-第十三讲课堂实践练习", "created": "2017-04-10T08:08:39Z", "content": "<p>请两人一组完成“第十三讲 实验四 内核线程管理”中指定小题的回答在此贴中回复&#xff0c;每组同学选做一个数据结构分析和一个流程分析。</p>\n<p></p>\n<p>题目&#xff1a;<br /><a href=\"https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html\">https://chyyuu.gitbooks.io/os_course_exercises/content/all/05-3-lab4-spoc-discussion.html</a></p>\n<p><br />视频相关思考题 -&gt; 13.2 关键数据结构 -&gt; 第1小题</p>\n<p></p>\n<p>分析proc_struct数据结构&#xff0c;说明每个字段的用途&#xff0c;是线程控制块或进程控制块的&#xff0c;会在哪些函数中修改。</p>"}], "type": "note", "tags": ["2017", "instructor-note", "lab4", "lecture13", "课堂问答"], "tag_good": [], "unique_views": 152, "children": [{"anon": "full", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p></p><pre>struct proc_struct {\n    enum proc_state state;                      // 进程的状态&#xff08;4种&#xff09;&#xff0c;属于进程控制块&#xff0c;在alloc_proc&#xff0c;try_free_pages&#xff0c;do_wait,do_exit等函数中会有修改\n    int pid;                                    // 进程的id&#xff0c;alloc_proc中分配一个全局唯一的pid\n    int runs;                                   // 进程的运行时间&#xff0c;在alloc_proc中初始化&#xff0c;在schedule函数中修改\n    uintptr_t kstack;                           // 进程的内核栈&#xff0c;在init_proc函数中初始化idleproc的内核栈&#xff0c;在setup_kstack中给一个进程分配内核栈空间\n    volatile bool need_resched;                 // bool value: need to be rescheduled to release CPU?\n    struct proc_struct *parent;                 // the parent process\n    struct mm_struct *mm;                       // Process&#39;s memory management field\n    struct context context;                     // Switch here to run process\n    struct trapframe *tf;                       // Trap frame for current interrupt\n    uintptr_t cr3;                              // CR3 register: the base addr of Page Directroy Table(PDT)\n    uint32_t flags;                             // Process flag\n    char name[PROC_NAME_LEN &#43; 1];               // Process name\n    list_entry_t list_link;                     // Process link list \n    list_entry_t hash_link;                     // Process hash list\n};</pre>\n<p></p>", "created": "2017-04-11T01:36:33Z", "bucket_order": 154, "bucket_name": "Week 4/9 - 4/15", "type": "followup", "tag_good": [], "uid_a": "a_0", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "j1cvm3xngam2tv", "updated": "2017-04-11T01:36:33Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>魏钧宇 2015011263</p>", "created": "2018-04-17T01:04:28Z", "bucket_order": 101, "bucket_name": "Week 4/15 - 4/21", "type": "followup", "tag_good": [], "uid": "isvxeq6bspf1vn", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p></p>\n<pre>struct proc_struct {\n    enum proc_state state;        // 进程状态&#xff0c;有创建、运行、睡眠、僵尸四个状态&#xff08;线程、进程都有&#xff09;\n    int pid;                      // 进程的唯一标示符&#xff08;线程、进程都有&#xff09;\n    int runs;                     // 进程的运行次数&#xff0c;每一次在Schedule中调度进程运行时都会运行一次&#xff08;线程、进程都有&#xff09;\n    uintptr_t kstack;             // 进程的内核堆栈&#xff0c;对于内核线程来说&#xff0c;这个栈就是平时使用的程序栈&#xff0c;对于用户线程/进程来说&#xff0c;这个栈只有在特权级切换&#xff08;如中断、异常、系统调用&#xff09;时才会用到&#xff08;线程、进程都有&#xff09;\n    volatile bool need_resched;   // 用于标示当前进程/线程是否会让出CPU的使用权&#xff08;线程、进程都有&#xff09;\n    struct proc_struct *parent;   // 标示当前线程的父线程&#xff08;线程、进程都有&#xff09;\n    struct mm_struct *mm;         // 用于管理当前进程对应的所有虚拟存储空间&#xff08;只有进程有&#xff09;\n    struct context context;       // 用于记录当前进程执行的上下文信息&#xff08;进程线程都有&#xff09;\n    struct trapframe *tf;         // 主要用于在进程/线程创建时初始化上下文信息&#xff08;进程线程都有&#xff09;\n    uintptr_t cr3;                // 页表基址寄存器&#xff08;只有进程有&#xff09;\n    uint32_t flags;               // 进程/线程标记符&#xff08;进程线程都有&#xff09;\n    char name[PROC_NAME_LEN &#43; 1]; // 进程/线程名&#xff08;进程线程都有&#xff09;\n    list_entry_t list_link;       // 在进程控制链表中的链表头&#xff08;进程线程都有&#xff09;\n    list_entry_t hash_link;       // 哈希表中的链表头&#xff08;进程线程都有&#xff09;\n};</pre>\n<p>上面是 Lab 8 中对于进程控制块的内容&#xff0c;在注释中注明了主要的含义&#xff08;对于Lab 4以后的内容没有详细描述&#xff09;&#xff0c;并说明了它是线程还是进程</p>", "created": "2018-04-18T11:30:10Z", "bucket_order": 101, "bucket_name": "Week 4/15 - 4/21", "type": "feedback", "tag_good": [], "uid": "isvxeq6bspf1vn", "children": [], "tag_good_arr": [], "id": "jg50mdx5wzc2jv", "updated": "2018-04-18T11:30:10Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jg2ytve8q3n1al", "updated": "2018-04-17T01:04:28Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p></p><pre>struct proc_struct {\n    enum proc_state state;                      // 进程状态\n    int pid;                                    // pid\n    int runs;                                   // 进程被调度运行的次数&#xff0c;某些调度算法可能会用到\n    uintptr_t kstack;                           // 进程内核栈地址\n    volatile bool need_resched;                 // 是否需要被调度&#xff0c;是一次进程调度内使用的局部变量。\n    struct proc_struct *parent;                 // 父进程\n    struct mm_struct *mm;                       // 内存信息\n    struct context context;                     // 上下文信息(寄存器值)\n    struct trapframe *tf;                       // 中断时使用的trapframe\n    uintptr_t cr3;                              // 页目录地址\n    uint32_t flags;                             // flag\n    char name[PROC_NAME_LEN &#43; 1];               // 进程名\n    list_entry_t list_link;                     // 用于链表的变量\n    list_entry_t hash_link;                     // 用于hash表的变量\n    int exit_code;                              // 返回值\n    uint32_t wait_state;                        // 等待状态&#xff0c;表示进程正处于哪一种等待状态\n    struct proc_struct *cptr, *yptr, *optr;     // 子进程、兄弟进程\n    struct run_queue *rq;                       // 进程属于的队列\n    list_entry_t run_link;                      // 用于调度算法中链表的变量\n    int time_slice;                             // 剩下的时间片\n    skew_heap_entry_t lab6_run_pool;            // 用于调度算法中斜堆的变量\n    uint32_t lab6_stride;                       // stride算法的步长\n    uint32_t lab6_priority;                     // 进程优先级\n    struct files_struct *filesp;                // 进程文件系统信息\n};</pre>\n<p>要区分进程控制块和线程控制块比较困难……因为实际上ucore是进程模拟线程的&#xff0c;即使mm_struct, filesp看上去是共用的&#xff0c;实际上也是复制了新的结构&#xff0c;没有各线程中共享的字段。</p>\n<p></p>\n<p>至于每个字段分别在哪些函数中被修改……这个工作量实在太大了…</p>", "created": "2018-04-17T01:31:33Z", "bucket_order": 101, "bucket_name": "Week 4/15 - 4/21", "type": "followup", "tag_good": [], "uid": "im0vq5pac4t1xa", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>可以尝试进行一部分字段的分析。这样的工作量还是不大的。</p>", "created": "2018-04-20T03:46:13Z", "bucket_order": 101, "bucket_name": "Week 4/15 - 4/21", "type": "feedback", "tag_good": [], "uid": "hdjonbiyfs62ie", "children": [], "tag_good_arr": [], "id": "jg7exfp7x4b742", "updated": "2018-04-20T03:46:13Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jg2zspkk7p7ok", "updated": "2018-04-17T01:31:33Z", "config": {}}], "tag_good_arr": [], "id": "j1bu6ht8tz828a", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 4, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169011693, "default_anonymity": "no"}, "error": null, "aid": "kyv0eju5ofc362"}