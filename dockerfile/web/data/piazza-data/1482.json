{"result": {"history_size": 1, "folders": ["lab5"], "nr": 1482, "data": {"embed_links": []}, "created": "2020-07-21T12:52:36Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "k0bt3s5i5a46n4", "data": "kcvxu5wxfgn5bc", "v": "all", "type": "create", "when": "2020-07-21T12:52:36Z"}, {"anon": "no", "uid": "kcjtsow38m34c6", "data": "kcyq1kdwe6l4g1", "to": "kcvxu5wufyt5bb", "type": "s_answer", "when": "2020-07-23T11:37:43Z"}, {"anon": "no", "uid": "kg54oc38acv1qs", "data": "kh0nckzujnk1w4", "type": "s_answer_update", "when": "2020-11-02T14:36:39Z"}, {"anon": "full", "to": "kcvxu5wufyt5bb", "type": "followup", "when": "2021-05-03T08:53:05Z", "cid": "ko8d7sc3rfu1jp", "uid_a": "a_0"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "k0bt3s5i5a46n4", "subject": "关于系统调用部分代码的写法", "created": "2020-07-21T12:52:36Z", "content": "<pre>\nstatic int (*syscalls[])(uint32_t arg[]) = {\n    [SYS_exit]              sys_exit,\n    [SYS_fork]              sys_fork,\n    [SYS_wait]              sys_wait,\n    [SYS_exec]              sys_exec,\n    [SYS_yield]             sys_yield,\n    [SYS_kill]              sys_kill,\n    [SYS_getpid]            sys_getpid,\n    [SYS_putc]              sys_putc,\n    [SYS_pgdir]             sys_pgdir,\n    [SYS_newline]           sys_newline\n};\n\n#define NUM_SYSCALLS        ((sizeof(syscalls)) / (sizeof(syscalls[0])))\n\nvoid\nsyscall(void) {\n    struct trapframe *tf = current-&gt;tf;\n    uint32_t arg[5];\n    int num = tf-&gt;tf_regs.reg_eax;\n    if (num &gt;= 0 &amp;&amp; num &lt; NUM_SYSCALLS) {\n        if (syscalls[num] != NULL) {\n            arg[0] = tf-&gt;tf_regs.reg_edx;\n            arg[1] = tf-&gt;tf_regs.reg_ecx;\n            arg[2] = tf-&gt;tf_regs.reg_ebx;\n            arg[3] = tf-&gt;tf_regs.reg_edi;\n            arg[4] = tf-&gt;tf_regs.reg_esi;\n            tf-&gt;tf_regs.reg_eax = syscalls[num](arg);\n            return ;\n        }\n    }\n    print_trapframe(tf);\n    panic(&#34;undefined syscall %d, pid = %d, name = %s.\\n&#34;,\n            num, current-&gt;pid, current-&gt;name);\n}</pre>\n<p>想问下这种写法static int (*syscalls[])(uint32_t arg[])是表示一个什么结构呢&#xff0c;看了这个代码之后&#xff0c;找不到进入具体某一个syscall(例如fork)的代码路径。十分感激大家&#xff0c;谢谢</p>"}], "type": "question", "tags": ["lab5", "student"], "tag_good": [], "unique_views": 112, "children": [{"history_size": 2, "folders": [], "data": {"embed_links": []}, "created": "2020-07-23T11:37:43Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "history": [{"anon": "no", "uid": "kg54oc38acv1qs", "subject": "", "created": "2020-11-02T14:36:39Z", "content": "<pre class=\"prettyprint\">这不是结构&#xff0c;这是一个数组声明&#xff0c;syscalls是一个数组&#xff0c;数组里的元素是函数&#xff0c;是 int (*f)(uint32_t arg[]) 这种类型的函数指针&#xff0c;至于里面的每一项&#xff0c;我没看懂的是方括号&#xff0c;容我找找资料。建议有时间看看《c和指针》是一本好书。  感觉方括号应该就是相当于一种宏替换吧</pre><pre class=\"prettyprint\"><br /></pre>"}, {"anon": "no", "uid": "kcjtsow38m34c6", "subject": "", "created": "2020-07-23T11:37:43Z", "content": "<pre>\n这不是结构&#xff0c;这是一个数组声明&#xff0c;syscalls是一个数组&#xff0c;数组里的元素是函数&#xff0c;是 int (*f)(uint32_t arg[]) 这种类型的函数指针&#xff0c;至于里面的每一项&#xff0c;我没看懂的是方括号&#xff0c;容我找找资料。建议有时间看看《c和指针》是一本好书。</pre>"}], "type": "s_answer", "tag_endorse_arr": [], "children": [], "id": "kcyq1kds9qw4g0", "config": {}, "is_tag_endorse": false}, {"anon": "full", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "[]优先级高&#xff0c;syscalls[]是一个数组&#xff0c;*syscalls[]是名为syscall的数组里面存储指针&#xff0c;指向返回值为int&#xff0c;参数为uint32_t arg[]的函数&#xff0c;上面提到的这个数组初始化方括号的问题&#xff0c;自己写一个&#xff0c;方括号可以自定义这个数组每一个元素的索引&#xff0c;初始化不必按照顺序来了。", "created": "2021-05-03T08:53:05Z", "bucket_order": 3, "bucket_name": "Today", "type": "followup", "tag_good": [], "uid_a": "a_0", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "ko8d7sc3rfu1jp", "updated": "2021-05-03T08:53:05Z", "config": {"editor": "plain"}}], "tag_good_arr": [], "no_answer": 0, "id": "kcvxu5wufyt5bb", "config": {"seen": {"1228": 8, "256": 9, "311": 3, "631": 0, "1047": 1, "942": 7, "1044": 4, "1040": 6, "1271": 5, "790": 2}}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 4, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643170156494, "default_anonymity": "no"}, "error": null, "aid": "kyv133667nl67w"}