{"result": {"folders": ["lab3"], "nr": 1445, "data": {"embed_links": []}, "created": "2020-04-07T16:55:47Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "jsjptolvvI0o", "data": "k8q5aghx62x4b6", "type": "create", "when": "2020-04-07T16:55:47Z"}, {"anon": "no", "uid": "k6qn2pksa4q3i5", "to": "k8q5aghud9u4b5", "type": "followup", "when": "2020-04-08T15:11:55Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "k8q5aghud9u4b5", "type": "feedback", "when": "2020-04-08T17:11:41Z"}, {"anon": "no", "uid": "k6pyw9ff1p06fq", "to": "k8q5aghud9u4b5", "type": "followup", "when": "2020-04-10T13:59:03Z"}, {"anon": "no", "uid": "k6pu3m0j9sv3q8", "to": "k8q5aghud9u4b5", "type": "followup", "when": "2020-04-10T14:47:25Z"}, {"anon": "no", "uid": "jsixh2acMNRV", "to": "k8q5aghud9u4b5", "type": "followup", "when": "2020-04-10T14:50:00Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "k8q5aghud9u4b5", "type": "feedback", "when": "2020-04-10T14:59:47Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "k8q5aghud9u4b5", "type": "feedback", "when": "2020-04-10T15:00:13Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "data": "k8ubwtfm69q3wy", "type": "update", "when": "2020-04-10T15:12:12Z"}, {"anon": "no", "uid": "k6qn2pksa4q3i5", "to": "k8q5aghud9u4b5", "type": "feedback", "when": "2020-04-10T16:13:08Z"}, {"anon": "no", "uid": "k6p3rzsl8nv49p", "to": "k8q5aghud9u4b5", "type": "followup", "when": "2020-04-10T18:02:14Z"}, {"anon": "no", "uid": "k6pt6bpgm2n7nw", "to": "k8q5aghud9u4b5", "type": "followup", "when": "2020-04-11T04:33:25Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "k8q5aghud9u4b5", "type": "feedback", "when": "2020-04-11T08:00:28Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "k8q5aghud9u4b5", "type": "feedback", "when": "2020-04-11T08:00:37Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "jsjptolvvI0o", "subject": "2020春-lab3申诉邀请贴", "created": "2020-04-10T15:12:12Z", "content": "<md>\n## 申诉邀请\n\n看报告看的头都晕了~~搞错分数很有可能&#xff0c;所以大家拿起维权的武器&#xff0c;留下你的学号和大概情况&#xff0c;我会仔细去确认的。\n\n这里说下我的评分标准和这次的基本情况。\n\n## 评分标准与作答基本情况\n\n### ucore:\n\n#### 概况\n\n总分10分&#xff0c;运行结果&#xff1a;5分&#xff0c;报告&#xff1a;5分&#xff0c;挑战&#xff1a;2分&#xff0c;超过10分按10分记。最后换算为百分制。\n\n#### 运行结果\n\n运行结果以 make grade 输出为准&#xff0c;这里我做了文件替换&#xff0c;只是用 kern\\mm\\swap_fifo.c 和 kern\\mm\\vmm.c 两个文件。\n\n只有两位同学没拿到满分。\n\n#### 报告&#xff1a;\n\n##### 代码分析 1 分&#xff1a;\n\n由于本次代码真的很简单&#xff0c;只要简单分析就给了&#xff0c;哪怕把注释全都抄过来&#xff0c;或者直接甩给我一份代码我都认&#xff08;仅代表个人标准&#xff0c;其他助教可能严格要求&#xff09;。只写&#xff1a;翻译注释即可&#xff0c;不给分。\n\n##### 练习一第一问 1 分&#xff1a;\n\nQ: 请描述页目录项&#xff08;Page Directory Entry&#xff09;和页表项&#xff08;Page Table Entry&#xff09;中组成部分对 ucore 实现页替换算法的潜在用处。\n\n只要写出访问位和修改位/dirty位对于时钟算法的帮助就给分。只写存在位帮助判断是否在磁盘上得0.5分。\n\n其他正确答案&#xff1a;PTE还在存在位为0时&#xff0c;记录了磁盘分区的信息。保留位为记录其他信息提供了可能。\n\n除了部分偷懒选手&#xff0c;大部分拿了满分。\n\n##### 练习一第二问 1 分&#xff1a;\n\nQ: 如果 ucore 的缺页服务例程在执行过程中访问内存&#xff0c;出现了页访问异常&#xff0c;请问硬件要做哪些事情&#xff1f;\n\n这道题比较完善的答案&#xff1a;\n\n这种情况下会发生中断嵌套&#xff0c;再次进行缺页中断处理&#xff0c;不过和第一次缺页中断处理有所不同。\n\n硬件会将发生缺页地址保存在 cr2 中&#xff0c;不换栈&#xff0c;&#xff08;不压入 ss, rsp&#xff09;压入rflags、cs、rip&#xff0c;跳转到 page fault 对应中断向量位置。\n\n关于 double fault &#xff08;在第三周周四课堂讨论参考答案上有详细描述&#xff09;: \n\n&#xff08;x86&#xff09;硬件是允许 异常嵌套。异常嵌套在前若干次&#xff08;根据内核栈的大小&#xff0c;几百到几千次&#xff09;都是标准的异常处理流程处理。每次嵌套&#xff0c;硬件和软件都会压栈&#xff0c;所以若干次嵌套之后会栈溢出&#xff08;i.e. 到没有页表映射的地址&#xff09;。这时继续嵌套&#xff0c;CPU 在尝试跳转到 IDT 指向的 handler 过程中发现不能压栈&#xff0c;因为栈溢出了&#xff0c;压栈会导致 page fault。也就是说&#xff0c;“尝试跳转到 page fault handler 的时候又触发了一个 page fault”&#xff0c;这时触发 double fault 异常&#xff0c;处理器会按照标准流程尝试跳转到 handler 去处理这个 double fault&#xff08;注意 double fault 和其他异常一样就是一个普通的异常&#xff09;。但是栈已经溢出了&#xff0c;所以在跳转到 double fault 的时候再次发生了 page fault&#xff08;硬件无法压栈 eip 等&#xff09;。这种情况下处理器进入 shutdown mode&#xff0c;也就是 triple fault。\n\n使用 qemu 的时候&#xff0c;qemu 默认检测到 cpu shutdown 之后会自动 reboot&#xff08;可用参数 -no-reboot 修改这个行为&#xff09;。\ndouble fault 不是说【执行】fault handler 的时候触发了 fault&#xff0c;而是【硬件跳转到】fault handler 的时候触发了 fault。并且 double fault 就是一个普通异常。triple fault 才是不可恢复的重大错误&#xff0c;会导致关机。\n\n我希望看到的描述是&#xff1a;保存 cr2, 不换栈&#xff0c;压入 rflags、cs、rip&#xff0c;跳转执行。只说会执行 page fault 处理得一半分&#xff1b;说出标准流程、错误认为执行double fault 处理&#xff0c;得满分&#xff1b;只说执行 double fault 处理不得分。只要有说不换栈、不压入ss rsp&#xff0c;得满分&#xff0c;因为已经意识到了这是一个嵌套的中断。\n\n完美答出期望答案的大概 5 人左右&#xff0c;这些都是看了课后讨论答案的好同志。大概有一半同学由于描述不全、错误、不严谨扣了一半分。\n\n##### 练习二三问 2 分&#xff1a;\n\n此题难度很小&#xff0c;扣分主要是没看清题目&#xff0c;答成了 fifo&#xff0c;或者干脆没看到还有回答要求的。答案不再赘述。\n\n#### 挑战\n\n部分同学做了 challenge 1, 仅有一位同学同时做了 1 2。\n\n只要有我接受的描述 / 代码&#xff0c;自行测试的截图&#xff0c;合理的说明就会给分。由于测试比较麻烦&#xff0c;允许有自己不同的设计&#xff0c;这部分主要依靠报告中的分析和示例给分。\n\n### rcore\n\n问答 2 分&#xff1a;\n\n有两个比较明显的错误。\n* 其一&#xff1a;在 do_pagefault 之后没有把从磁盘上读取的新页放入页面管理中&#xff0c;解决&#xff1a;加一句 push_frame。\n* 其二&#xff1a;写回脏页靠的是访问位&#xff0c;这在时钟调度算法中会导致脏页无法写回&#xff0c;解决&#xff1a;改变判断方式。\n\n只要提到以上任何一点就满分。其他分析合理的也给满分。回答一些影响效率但不是错误的问题&#xff0c;如&#xff1a;页面管理总在全局进行等&#xff0c;得 1.5 分&#xff0c;分析两点得满分。回答一些比较不是问题的问题&#xff0c;如 fifo 有belady&#xff0c;分析详细的得1分&#xff0c;分析太简单得 0.5 。</md>"}, {"anon": "no", "uid": "jsjptolvvI0o", "subject": "2020春-lab3申诉邀请贴", "created": "2020-04-07T16:55:47Z", "content": "<md>\n## 申诉邀请\n\n看报告看的头都晕了~~搞错分数很有可能&#xff0c;所以大家拿起维权的武器&#xff0c;留下你的学号和大概情况&#xff0c;我会仔细去确认的。\n\n这里说下我的评分标准和这次的基本情况。\n\n## 评分标准与作答基本情况\n\n### ucore:\n\n#### 概况\n\n总分10分&#xff0c;运行结果&#xff1a;5分&#xff0c;报告&#xff1a;5分&#xff0c;挑战&#xff1a;2分&#xff0c;超过10分按10分记。最后换算为百分制。\n\n#### 运行结果\n\n运行结果以 make grade 输出为准&#xff0c;这里我做了文件替换&#xff0c;只是用 kern\\mm\\swap_fifo.c 和 kern\\mm\\vmm.c 两个文件。\n\n只有两位同学没拿到满分。\n\n#### 报告&#xff1a;\n\n##### 代码分析 1 分&#xff1a;\n\n由于本次代码真的很简单&#xff0c;只要简单分析就给了&#xff0c;哪怕把注释全都抄过来&#xff0c;或者直接甩给我一份代码我都认&#xff08;仅代表个人标准&#xff0c;其他助教可能严格要求&#xff09;。只写&#xff1a;翻译注释即可&#xff0c;不给分。\n\n##### 练习一第一问 1 分&#xff1a;\n\nQ: 请描述页目录项&#xff08;Page Directory Entry&#xff09;和页表项&#xff08;Page Table Entry&#xff09;中组成部分对 ucore 实现页替换算法的潜在用处。\n\n只要写出访问位和修改位/dirty位对于时钟算法的帮助就给分。只写存在位帮助判断是否在磁盘上得0.5分。\n\n其他正确答案&#xff1a;PTE还在存在位为0时&#xff0c;记录了磁盘分区的信息。保留位为记录其他信息提供了可能。\n\n除了部分偷懒选手&#xff0c;大部分拿了满分。\n\n##### 练习一第二问 1 分&#xff1a;\n\nQ: 如果 ucore 的缺页服务例程在执行过程中访问内存&#xff0c;出现了页访问异常&#xff0c;请问硬件要做哪些事情&#xff1f;\n\n这道题比较完善的答案&#xff1a;\n\n这种情况下会发生中断嵌套&#xff0c;再次进行缺页中断处理&#xff0c;不过和第一次缺页中断处理有所不同。\n\n硬件会将发生缺页地址保存在 cr2 中&#xff0c;不换栈&#xff0c;&#xff08;不压入 ss,  rsp&#xff09;压入rflags、cs、rip&#xff0c;跳转到 page fault 对应中断向量位置。\n\n关于 double fault  &#xff08;在第三周周四课堂讨论参考答案上有详细描述&#xff09;: \n\n&#xff08;x86&#xff09;硬件是允许 异常嵌套。异常嵌套在前若干次&#xff08;根据内核栈的大小&#xff0c;几百到几千次&#xff09;都是标准的异常处理流程处理。每次嵌套&#xff0c;硬件和软件都会压栈&#xff0c;所以若干次嵌套之后会栈溢出&#xff08;i.e. 到没有页表映射的地址&#xff09;。这时继续嵌套&#xff0c;CPU 在尝试跳转到 IDT 指向的 handler 过程中发现不能压栈&#xff0c;因为栈溢出了&#xff0c;压栈会导致 page fault。也就是说&#xff0c;“尝试跳转到 page fault handler 的时候又触发了一个 page fault”&#xff0c;这时触发 double fault 异常&#xff0c;处理器会按照标准流程尝试跳转到 handler 去处理这个 double fault&#xff08;注意 double fault 和其他异常一样就是一个普通的异常&#xff09;。但是栈已经溢出了&#xff0c;所以在跳转到 double fault 的时候再次发生了 page fault&#xff08;硬件无法压栈 eip 等&#xff09;。这种情况下处理器进入 shutdown mode&#xff0c;也就是 triple fault。\n\n使用 qemu 的时候&#xff0c;qemu 默认检测到 cpu shutdown 之后会自动 reboot&#xff08;可用参数 -no-reboot 修改这个行为&#xff09;。\ndouble fault 不是说【执行】fault handler 的时候触发了 fault&#xff0c;而是【硬件跳转到】fault handler 的时候触发了 fault。并且 double fault 就是一个普通异常。triple fault 才是不可恢复的重大错误&#xff0c;会导致关机。\n\n我希望看到的描述是&#xff1a;保存 cr2, 不换栈&#xff0c;压入 rflags、cs、rip&#xff0c;跳转执行。只说会执行 page fault 处理得一半分&#xff1b;说出标准流程、错误认为执行double fault 处理&#xff0c;得满分&#xff1b;只说执行 double fault 处理不得分。只要有说不换栈、不压入ss rsp&#xff0c;得满分&#xff0c;因为已经意识到了这是一个嵌套的中断。\n\n完美答出期望答案的大概 5 人左右&#xff0c;这些都是看了课后讨论答案的好同志。大概有一半同学由于描述不全、错误、不严谨扣了一半分。\n\n##### 练习二三问 2 分&#xff1a;\n\n此题难度很小&#xff0c;扣分主要是没看清题目&#xff0c;答成了 fifo&#xff0c;或者干脆没看到还有回答要求的。答案不再赘述。\n\n#### 挑战\n\n部分同学做了 challenge 1, 仅有一位同学同时做了 1 2。\n\n只要有我接受的描述 / 代码&#xff0c;自行测试的截图&#xff0c;合理的说明就会给分。由于测试比较麻烦&#xff0c;允许有自己不同的设计&#xff0c;这部分主要依靠报告中的分析和示例给分。\n\n### rcore\n\n做 rcore 的同学有一部分还没给分数&#xff0c;这是由于测试的时候出现了比较多的环境问题&#xff0c;还在逐一解决。会在近期更新。</md>"}], "type": "note", "tags": ["lab3", "student"], "tag_good": [], "unique_views": 153, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>助教您好&#xff0c;我是计71的张育嘉&#xff0c;我在网络学堂拿到的分数有点问题&#xff0c;情况是我当晚remote连不上&#xff0c;没法提交到gitlab上&#xff0c;紧急使用邮件的方式提交&#xff0c;寄到助教的学校邮箱&#xff0c;可能是助教没有看到&#xff0c;所以在网络学堂给的是0分&#xff0c;评语备注是未完成lab3&#xff0c;还请助教到邮箱查收一下&#xff0c;我的学号是2017011309&#xff0c;发送提交邮件的邮箱是zhangyuj17&#64;mails.tsinghua.edu.cn。</p>", "created": "2020-04-08T15:11:55Z", "bucket_order": 6, "bucket_name": "Last week", "type": "followup", "tag_good": [], "uid": "k6qn2pksa4q3i5", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>已经看到邮件&#xff0c;我会在本周内完成成绩更新。以后注意提交时间&#xff0c;不要过分赶DDL。</p>", "created": "2020-04-08T17:11:41Z", "bucket_order": 6, "bucket_name": "Last week", "type": "feedback", "tag_good": [{"role": "student", "name": "张育嘉", "endorser": {}, "admin": false, "photo": null, "id": "k6qn2pksa4q3i5", "photo_url": null, "published": true, "us": false, "facebook_id": null}], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": ["k6qn2pksa4q3i5"], "id": "k8rlardo9s54r7", "updated": "2020-04-08T17:11:41Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>好的感谢助教&#xff01;</p>", "created": "2020-04-10T16:13:08Z", "bucket_order": 6, "bucket_name": "Last week", "type": "feedback", "tag_good": [], "uid": "k6qn2pksa4q3i5", "children": [], "tag_good_arr": [], "id": "k8ue35yz1nz544", "updated": "2020-04-10T16:13:08Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "k8rh0r4lz3v1kr", "updated": "2020-04-08T15:11:55Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>助教您好&#xff0c;我是计75的顾煜贤(2017011421)&#xff0c;我在网络学堂拿到的分数是95分&#xff08;我猜是9.5&#xff1f;&#xff09;。我做了challenge 1&#xff0c;代码及分析和实验报告写在一起&#xff0c;但是评语里写得应该只是练习一第二问因为对triple fault理解有误扣了分&#xff08;我猜是0.5分&#xff1f;&#xff09;。不知道是不是challenge的分数没有加上去&#xff1f;还麻烦助教看一下&#xff0c;谢谢&#xff01;</p>", "created": "2020-04-10T13:59:03Z", "bucket_order": 6, "bucket_name": "Last week", "type": "followup", "tag_good": [], "uid": "k6pyw9ff1p06fq", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>我的锅&#xff0c;已经更新。</p>", "created": "2020-04-10T15:00:13Z", "bucket_order": 6, "bucket_name": "Last week", "type": "feedback", "tag_good": [], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": [], "id": "k8ubhek4p3t2ly", "updated": "2020-04-10T15:00:13Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "k8u9aqyrvdu5nn", "updated": "2020-04-10T13:59:03Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "助教您好&#xff0c;我是计72杨智涵&#xff08;2017011481)&#xff0c;抱歉没有将report提交到git上&#xff0c;现在已经提交。commit为8738a1d080aabdc6054e61b3cd2919f3cebe6ba6\n本地修改日期是在ddl之前。麻烦助教批改&#xff0c;谢谢您&#xff01;", "created": "2020-04-10T14:47:25Z", "bucket_order": 6, "bucket_name": "Last week", "type": "followup", "tag_good": [], "uid": "k6pu3m0j9sv3q8", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>收到。但是会酌情扣分。</p>", "created": "2020-04-10T14:59:47Z", "bucket_order": 6, "bucket_name": "Last week", "type": "feedback", "tag_good": [], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": [], "id": "k8ubgu3bp125k", "updated": "2020-04-10T14:59:47Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "k8ub0xqext26n", "updated": "2020-04-10T14:47:25Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>助教你好&#xff0c;我之前忘记在网络学堂交&#xff0c;我是在另一个分支上写的lab2&#xff0c;commit id是这个&#xff1a;https://git.tsinghua.edu.cn/os-20/labs-2016011361/commit/2b993641&#xff0c;麻烦您看一下~</p>", "created": "2020-04-10T14:50:00Z", "bucket_order": 6, "bucket_name": "Last week", "type": "followup", "tag_good": [], "uid": "jsixh2acMNRV", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "k8ub494lakh20d", "updated": "2020-04-10T14:50:00Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "助教您好&#xff0c;我rcore实验的lab3的report错放到了仓库的os/report目录下&#xff0c;导致没有报告分&#xff0c;如果可以的话能不能麻烦助教看一下&#xff0c;谢谢~\n计71 叶牧心 2017011316", "created": "2020-04-10T18:02:14Z", "bucket_order": 6, "bucket_name": "Last week", "type": "followup", "tag_good": [], "uid": "k6p3rzsl8nv49p", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>收到</p>", "created": "2020-04-11T08:00:28Z", "bucket_order": 6, "bucket_name": "Last week", "type": "feedback", "tag_good": [], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": [], "id": "k8vbxg6j6b07gu", "updated": "2020-04-11T08:00:28Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "k8uhzh3og3f5d9", "updated": "2020-04-10T18:02:14Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "助教您好&#xff0c;我是计73李家昊(2017011620)&#xff0c;我也做了challenge但是貌似没有分&#xff0c;还请麻烦助教看一下&#xff0c;非常感谢&#xff01;", "created": "2020-04-11T04:33:25Z", "bucket_order": 6, "bucket_name": "Last week", "type": "followup", "tag_good": [], "uid": "k6pt6bpgm2n7nw", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>OK</p>", "created": "2020-04-11T08:00:37Z", "bucket_order": 6, "bucket_name": "Last week", "type": "feedback", "tag_good": [], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": [], "id": "k8vbxnbuzf17k5", "updated": "2020-04-11T08:00:37Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "k8v4j6a3mwi3bz", "updated": "2020-04-11T04:33:25Z", "config": {}}], "tag_good_arr": [], "id": "k8q5aghud9u4b5", "config": {"seen": {"1128": 3, "699": 4, "1051": 6, "1072": 9, "1319": 1, "1071": 7, "1439": 2, "582": 8, "1416": 5, "1427": 0}}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 7, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643170057874, "default_anonymity": "no"}, "error": null, "aid": "kyv10z2q7m0597"}