{"result": {"folders": ["lab1"], "nr": 1450, "data": {"embed_links": []}, "created": "2020-04-13T17:22:51Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "jj4coowv6Wrm", "data": "k8yqwdyelw71im", "v": "all", "type": "create", "when": "2020-04-13T17:22:51Z"}, {"anon": "no", "uid": "jj4coowv6Wrm", "data": "k8yqy4y5kxg4fu", "type": "update", "when": "2020-04-13T17:24:13Z"}, {"anon": "no", "uid": "jj4coowv6Wrm", "data": "k8yqyv38fz156k", "type": "update", "when": "2020-04-13T17:24:47Z"}, {"anon": "full", "data": "k8zot2r6jk2568", "to": "k8yqwdycqos1il", "type": "s_answer", "when": "2020-04-14T09:12:04Z", "uid_a": "a_0"}, {"anon": "full", "uid_a": "a_0", "data": "k8zp2jo539u6mu", "type": "s_answer_update", "when": "2020-04-14T09:19:25Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "jj4coowv6Wrm", "subject": "关于rust条件编译的问题", "created": "2020-04-13T17:24:47Z", "content": "<p>在第三章中断部分&#xff0c;os对寄存器操作是通过引入一个库&#xff08;<strong>riscv = { git = &#34;https://github.com/rcore-os/riscv&#34;, features = [&#34;inline-asm&#34;] }</strong>&#xff09;实现的。</p>\n<p>我通过把库中断相关的代码直接写进os中来试图深入理解。</p>\n<p><img src=\"/img/1450-3f50aecfffceeef4.png\" alt=\"\" /></p>\n<div>其中<strong>#[cfg(all(riscv, feature = &#34;inline-asm&#34;))]</strong>表示条件编译。查询相关文档后找不到在编译时候加入什么参数或在通过配置使得编译时候通过这个条件。</div>\n<div>最后不得不去掉match&#xff08;&#xff09;来通过。请问有什么好的解决方法吗&#xff1f;</div>"}, {"anon": "no", "uid": "jj4coowv6Wrm", "subject": "关于rust条件编译的问题", "created": "2020-04-13T17:24:13Z", "content": "<p>在第三章中断部分&#xff0c;os对寄存器操作是通过引入一个库&#xff08;<strong>riscv = { git = &#34;https://github.com/rcore-os/riscv&#34;, features = [&#34;inline-asm&#34;] }</strong>&#xff09;实现的。</p>\n<p>我通过把库中断相关的代码直接写进os中来试图深入理解。</p>\n<p><img src=\"/img/1450-3f50aecfffceeef4.png\" alt=\"\" /></p>\n<div>其中<strong>#[cfg(all(riscv, feature = &#34;inline-asm&#34;))]</strong>表示条件编译。查询相关文档后找不到在编译时候加入什么参数或在通过配置使得编译时候通过这个条件。</div>\n<div>最后不得不去掉match&#xff08;&#xff09;来通过。请问有什么好的解决方法吗&#xff1f;</div>"}, {"anon": "no", "uid": "jj4coowv6Wrm", "subject": "关于rust条件编译的问题", "created": "2020-04-13T17:22:51Z", "content": "<p>在第三章中断部分&#xff0c;os对寄存器操作是通过引入一个库&#xff08;riscv = { git = &#34;https://github.com/rcore-os/riscv&#34;, features = [&#34;inline-asm&#34;] }&#xff09;实现的。</p>\n<p>我通过把库中断相关的代码直接写进os中来试图深入理解。</p>\n<p><img src=\"/img/1450-3f50aecfffceeef4.png\" alt=\"\" /></p>\n<div>其中#[cfg(all(riscv, feature = &#34;inline-asm&#34;))]表示条件编译。查询相关文档后找不到在编译时候加入什么参数或在通过配置使得编译时候通过这个条件。</div>\n<div>最后不得不去掉match&#xff08;&#xff09;来通过。请问有什么好的解决方法吗&#xff1f;</div>"}], "type": "question", "tags": ["lab1", "student"], "tag_good": [], "unique_views": 78, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2020-04-14T09:12:04Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "k8zot2r2j10567", "history": [{"anon": "full", "uid_a": "a_0", "subject": "", "created": "2020-04-14T09:19:25Z", "content": "<p>如果平台是固定的&#xff0c;直接去掉match就行了。</p>\n<p>或者你可以把选项改为 cfg(any(target_arch=&#34;riscv64&#34;, target_arch=&#34;riscv32&#34;)).</p>\n<p></p>\n<p>传递cfg参数我听说过这些方式&#xff1a;</p>\n<p>1. 用 cargo rustc -- --cfg riscv --cfg riscv64/32</p>\n<p>2. 写一个 .cargo/config 文件&#xff0c;加一条</p>\n<p>[build]</p>\n<p>rustflags = [&#34;-C riscv&#34;, &#34;-C riscv&#34;]。</p>\n<p>3. 写 build.rs, 参考 <strong>https://github.com/rcore-os/riscv</strong> 里的 build.rs.</p>"}, {"anon": "full", "uid_a": "a_0", "subject": "", "created": "2020-04-14T09:12:04Z", "content": "<p>如果平台是固定的&#xff0c;直接去掉match就行了。</p>\n<p>传递cfg参数我知道这些方式&#xff1a;</p>\n<p>1. 用 cargo rustc -- --cfg riscv --cfg riscv64/32</p>\n<p>2. 把选项改为 cfg(any(target_arch=&#34;riscv64&#34;, target_arch=&#34;riscv32&#34;)).</p>\n<p>3. 写一个 .cargo/config 文件&#xff0c;加一条</p>\n<p>[build]</p>\n<p>rustflags = [&#34;-C riscv&#34;, &#34;-C riscv&#34;]。</p>\n<p>4. 写 build.rs, 参考 <strong>https://github.com/rcore-os/riscv</strong> 里的 build.rs.</p>"}], "type": "s_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}], "tag_good_arr": [], "no_answer": 0, "id": "k8yqwdycqos1il", "config": {"seen": {"550": 3, "1248": 1, "37": 4, "1147": 2, "1311": 6, "743": 7, "1132": 8, "559": 5, "1163": 0, "1207": 9}}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 2, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643170075274, "default_anonymity": "no"}, "error": null, "aid": "kyv11ci2dih6u7"}