{"result": {"folders": ["q&a"], "nr": 1310, "data": {"embed_links": []}, "created": "2019-04-23T05:11:35Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "jshne0ytr8i4nb", "data": "jutc0pr7f36ks", "type": "create", "when": "2019-04-23T05:11:35Z"}, {"anon": "no", "uid": "it2wrxu13f13sy", "data": "jutdexhp6ff2sl", "to": "jutc0pr4q3gkr", "type": "s_answer", "when": "2019-04-23T05:50:38Z"}, {"anon": "no", "uid": "jshne0ytr8i4nb", "to": "jutc0pr4q3gkr", "type": "followup", "when": "2019-04-23T08:07:34Z"}, {"anon": "no", "uid": "it2wrxu13f13sy", "to": "jutc0pr4q3gkr", "type": "feedback", "when": "2019-04-23T11:00:23Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "jshne0ytr8i4nb", "subject": "ide有哪些&#xff0c;都指的是什么&#xff0c;init的时候完成了什么工作", "created": "2019-04-23T05:11:35Z", "content": "<p>ide 0: 10000(sectors), &#39;QEMU HARDDISK&#39;.<br />ide 1: 262144(sectors), &#39;QEMU HARDDISK&#39;.<br />&gt;每次输出总会有这个出现<br />&gt;翻看了ide_init(), 觉得是关于设备的初始化&#xff0c;为什么会是两个呢<br />&#96;&#96;&#96; c<br />static struct ide_device {<br /> unsigned char valid; // 0 or 1 (If Device Really Exists)<br /> unsigned int sets; // Commend Sets Supported 支持的命令集&#xff1f;<br /> unsigned int size; // Size in Sectors 选择子大小&#xff1f;<br /> unsigned char model[41]; // Model in String ucore只有qemu&#xff1f;哪里初始化过了吗<br />} ide_devices[MAX_IDE];<br />&#96;&#96;&#96;</p>\n<p>&gt;问题在上方&#xff0c;关于IRQ_IDE1/2&#xff0c;指的是用中断开启它们&#xff0c;所以相应的中断向量应该是14 15对应的吗?</p>\n<p>有点不记得怎么找中断向量相关的代码了&#xff0c;里面用了好多outb&#xff0c;是从端口输出一字节&#xff0c;没有理解这个过程的意义</p>\n<p>中断向量以前路程助教给我讲过一次&#xff0c;只知道vetor.S是自动生成的&#xff0c;trap_dispatch(struct trapframe *tf)这个函数中并没有IRQ_IDE 1 2的实现&#xff0c;所以这个初始化究竟做了什么呢</p>"}], "type": "question", "tags": ["q&a", "student"], "tag_good": [], "unique_views": 104, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2019-04-23T05:50:38Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "jutdexhlxw52si", "history": [{"anon": "no", "uid": "it2wrxu13f13sy", "subject": "", "created": "2019-04-23T05:50:38Z", "content": "<p>1. 两个ide指的是&#xff0c;一个用来存放文件系统&#xff08;lab 8&#xff09;&#xff0c;一个用来存放swap分区。一般主板有 2 个 IDE 通道&#xff0c;每个通道可以接 2 个 IDE 硬盘&#xff0c;所以ucore中设置MAX_IDE为4.</p>\n<p>2. 关于IRQ_IDE1和IRQ_IDE2的中断处理代码见&#xff1a;<a href=\"https://github.com/chyyuu/ucore_os_lab/blob/024c8ffc62d4f38fa16e0c1c90758cae4cfa2319/labcodes_answer/lab8_result/kern/trap/trap.c#L263\">https://github.com/chyyuu/ucore_os_lab/blob/024c8ffc62d4f38fa16e0c1c90758cae4cfa2319/labcodes_answer/lab8_result/kern/trap/trap.c#L263</a><a href=\"https://github.com/chyyuu/ucore_os_lab/blob/024c8ffc62d4f38fa16e0c1c90758cae4cfa2319/labcodes_answer/lab8_result/kern/trap/trap.c#L263\"></a></p>\n<p>3. 关于outb的作用&#xff08;或其他ide相关知识&#xff09;&#xff0c;可以参考ucore os docs中lab1的部分&#xff1a;<a href=\"https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_3_2_3_dist_accessing.html\">https://chyyuu.gitbooks.io/ucore_os_docs/content/lab1/lab1_3_2_3_dist_accessing.html</a></p>\n<p>4. 如果不记得我之前给你讲的中断向量的相关知识&#xff0c;建议复习一下我们以前的微信聊天记录&#xff0c;整理一下发到piazza上&#xff0c;也方便其他同学学习。</p>\n<p>5. 我叫路橙&#xff0c;不是路程 : )</p>"}], "type": "s_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "1.谢谢路橙助教&#xff01;\n2.所以这里的两个ide&#xff0c;是两个通道&#xff0c;每个暂时只连了一个硬盘的意思吧&#xff1f;也就是说这两个ide是硬盘&#xff0c;还是通道&#xff1f;\n3.最后那个使能ide中断实际上并没有做事&#xff0c;是ucore把这部分逻辑删去了&#xff1f;还是本来就没用&#xff1f;\n4.是我不仔细&#xff0c;确实是在trap_dispatch(struct trapframe *tf)这个函数中定义了&#xff0c;vector.S是自动生成的\nlab1中涉及的中断\n     IRQ_OFFSET &#43; IRQ_IDE1: //使能IDE1\n     IRQ_OFFSET &#43; IRQ_IDE2:     //使能IDE2\n     IRQ_OFFSET &#43; IRQ_TIMER:  //使能时钟\n     IRQ_OFFSET &#43; IRQ_COM1:   //使能串口\n     IRQ_OFFSET &#43; IRQ_KBD:   //使能键盘\n     T_SWITCH_TOU: // 转换到用户态\n     T_SWITCH_TOK:  //转换到内核态\n\n    case IRQ_OFFSET &#43; IRQ_IDE1:\n    case IRQ_OFFSET &#43; IRQ_IDE2:\n        /* do nothing  啥都不用做&#xff0c;要它干嘛&#xff1f;&#xff1f; */\n        break;", "created": "2019-04-23T08:07:34Z", "bucket_order": 49, "bucket_name": "Week 4/21 - 4/27", "type": "followup", "tag_good": [], "uid": "jshne0ytr8i4nb", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>是硬盘。</p>\n<p>ucore里没用&#xff0c;所以删去了。</p>", "created": "2019-04-23T11:00:23Z", "bucket_order": 49, "bucket_name": "Week 4/21 - 4/27", "type": "feedback", "tag_good": [], "uid": "it2wrxu13f13sy", "children": [], "tag_good_arr": [], "id": "jutoh9ra69d3wb", "updated": "2019-04-23T11:00:23Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jutib15ca5j2q", "updated": "2019-04-23T08:07:34Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jutc0pr4q3gkr", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 3, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169718590, "default_anonymity": "no"}, "error": null, "aid": "kyv0tpa6wti4z9"}