{"result": {"folders": ["lab3"], "nr": 382, "data": {"embed_links": []}, "created": "2015-05-03T12:38:35Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"uid": "i6z6k9yt7b77nz", "anon": "no", "when": "2015-05-03T12:38:35Z", "data": "i98g2igdq0x7pc", "type": "create"}, {"to": "i98g2igbotf7pb", "uid": "i6ucxgbeel362h", "anon": "no", "when": "2015-05-03T18:47:16Z", "data": "i98t8n7ra4o41d", "type": "i_answer"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "i6z6k9yt7b77nz", "subject": "lab3中的swap_in函数&#xff0c;返回值恒为0&#xff1f;", "created": "2015-05-03T12:38:35Z", "content": "<p>阅读了swap.c中的代码&#xff1a;swap_in</p>\n<p>int<br />swap_in(struct mm_struct *mm, uintptr_t addr, struct Page **ptr_result)<br />{<br /> struct Page *result = alloc_page();<br /> assert(result!=NULL);</p>\n<p>pte_t *ptep = get_pte(mm-&gt;pgdir, addr, 0);<br /> // cprintf(&#34;SWAP: load ptep %x swap entry %d to vaddr 0x%08x, page %x, No %d\\n&#34;, ptep, (*ptep)&gt;&gt;8, addr, result, (result-pages));<br /> <br /> int r;<br /> if ((r = swapfs_read((*ptep), result)) != 0)<br /> {<br /> assert(r!=0);<br /> }<br /> cprintf(&#34;swap_in: load disk swap entry %d with swap_page in vadr 0x%x\\n&#34;, (*ptep)&gt;&gt;8, addr);<br /> *ptr_result=result;<br /> return 0;<br />}</p>\n<p>从代码来看&#xff0c;除非出错直接退出&#xff0c;否则返回值恒为0&#xff1f;</p>\n<p>那么在vmm的do_pgfault中&#xff0c;是不是就不需要检测ret = swap_in(mm,addr,&amp;page)是否为0了&#xff1f;</p>"}], "type": "question", "tags": ["lab3", "student"], "tag_good": [], "unique_views": 71, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2015-05-03T18:47:16Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "i98t8n7nx4x41c", "history": [{"anon": "no", "uid": "i6ucxgbeel362h", "subject": "", "created": "2015-05-03T18:47:16Z", "content": "<p>是&#xff0c;不过为了谨慎起见也可以检查</p>"}], "type": "i_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}], "tag_good_arr": [], "no_answer": 0, "id": "i98g2igbotf7pb", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 3, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643167706803, "default_anonymity": "no"}, "error": null, "aid": "kyuzmkz7lv6w9"}