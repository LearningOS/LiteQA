{"result": {"folders": ["lab2"], "nr": 1404, "data": {"embed_links": []}, "created": "2020-02-28T12:32:47Z", "bucket_order": 3, "no_answer_followup": 1, "change_log": [{"anon": "no", "uid": "k6pwuof0io04ul", "data": "k765q0q37tayq", "type": "create", "when": "2020-02-28T12:32:47Z"}, {"anon": "no", "uid": "k4xnjv05uc83n2", "to": "k765q0q0oghyp", "type": "followup", "when": "2020-06-20T09:17:04Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "k6pwuof0io04ul", "subject": "关于ucore lab2分配页表的一个疑问", "created": "2020-02-28T12:32:47Z", "content": "<md>我在ucore中实现buddy memory allocation时遇到了一个问题&#xff1a;\n\n在pmm.c的get_pte函数中&#xff0c;当PDT中没有对应页表且create参数为真的时候&#xff0c;会尝试分配一个page作为页表。在这个过程中假定了分配出来的page的虚拟地址可以通过物理地址加上KERNBASE得到&#xff08;用到了KADDR宏&#xff09;。但是在boot_map_segment完成前应该只有0~4M的物理地址创建了这一对应关系。如果使用非First Fit的分配策略&#xff0c;分配出的page可能不在0~4M的范围内&#xff0c;这时候直接对通过KADDR宏得到的虚拟地址进行操作就会出错。\n\n请问这种问题该如何避免&#xff1f;我目前的想法是在完成boot_map_segment之前强行让pmm采用first fit的策略&#xff0c;但感觉实现起来比较繁琐且不那么优美。</md>"}], "type": "question", "tags": ["lab2", "student", "unanswered"], "tag_good": [], "unique_views": 116, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>问题解决了吗&#xff1f;buddy system是内存分配的一种方法&#xff0c;与之相对应的是连续分配方法&#xff0c;与是否使用first-fit不冲突吧。</p>\n<p>你说的非First Fit的分配策略可以分配出的page指的是什么分配策略&#xff1f;</p>\n<p>你拿来分配的地址虚拟地址或者线性地址&#xff0c;对应到物理地址上&#xff0c;无论如何都可以对应到0-4M的物理地址上吧</p>", "created": "2020-06-20T09:17:04Z", "bucket_order": 3, "bucket_name": "Today", "type": "followup", "tag_good": [], "uid": "k4xnjv05uc83n2", "children": [], "tag_good_arr": [], "no_answer": 1, "id": "kbnfhlalvv19q", "updated": "2020-06-20T09:17:04Z", "config": {}}], "tag_good_arr": [], "no_answer": 1, "id": "k765q0q0oghyp", "config": {"seen": {"352": 7, "686": 6, "302": 1, "1333": 5, "1399": 8, "1331": 0, "1021": 2, "172": 3, "1207": 4}}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 2, "num_favorites": 0, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169962686, "default_anonymity": "no"}, "error": null, "aid": "kyv0yxmm9vf3oh"}