{"result": {"folders": ["2018", "lecture3", "课堂问答"], "nr": 1141, "data": {"embed_links": []}, "created": "2018-03-05T15:44:33Z", "bucket_order": 3, "no_answer_followup": 2, "change_log": [{"anon": "no", "uid": "hdjonbiyfs62ie", "data": "jeeec166wee4ig", "type": "create", "when": "2018-03-05T15:44:33Z"}, {"anon": "no", "uid": "im0vq5pac4t1xa", "to": "jeeec163fj74if", "type": "followup", "when": "2018-03-06T01:20:16Z"}, {"anon": "no", "uid": "jsjptolvvI0o", "to": "jeeec163fj74if", "type": "followup", "when": "2019-03-08T08:33:42Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hdjonbiyfs62ie", "subject": "2018春季-第三讲课堂实践练习二", "created": "2018-03-05T15:44:33Z", "content": "<p>通过静态代码分析&#xff0c;举例描述ucore系统调用过程&#xff0c;及调用参数和返回值的传递方法。</p>\n<p></p>\n<p><a href=\"https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/02-1-spoc-discussion.md#%E7%BB%83%E4%B9%A0%E4%BA%8C\">https://github.com/chyyuu/os_course_exercises/blob/2018spring/all/02-1-spoc-discussion.md#%E7%BB%83%E4%B9%A0%E4%BA%8C</a></p>\n<p></p>"}], "type": "note", "tags": ["2018", "instructor-note", "lecture3", "课堂问答"], "tag_good": [], "unique_views": 167, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>系统调用基本流程和中断处理相同&#xff0c;只是需要将系统调用号和传入的参数分别存入eax开始的寄存器中&#xff0c;在中断处理时会被压入栈中组成struct trapframe(user/libs/syscall.c), 随后中断处理中&#xff0c;根据栈中的寄存器值&#xff0c;使用函数指针数组调用对应的处理函数。其结果存入tf_regs.reg_eax(kern/syscall/syscall.c)&#xff0c;在中断返回时被返回到eax中&#xff0c;作为返回值。至此即完成全部调用过程。</p>", "created": "2018-03-06T01:20:16Z", "bucket_order": 110, "bucket_name": "Week 3/4 - 3/10", "type": "followup", "tag_good": [], "uid": "im0vq5pac4t1xa", "children": [], "tag_good_arr": [], "no_answer": 1, "id": "jeeywfdosv54qm", "updated": "2018-03-06T01:20:16Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>在库函数中&#xff0c;所有的系统调用最终通过调用\\user\\libs 中syscall实现</p>\n<p><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjszt1r0li0la%2F%E6%8D%95%E8%8E%B72.PNG\" alt=\"\" /><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjszsw9xm293d%2F%E6%8D%95%E8%8E%B7.PNG\" alt=\"\" /></p>\n<p>此时&#xff0c;系统调用编号以及相关参数存储在通用寄存器之中。返回值将储存在%eax中。</p>\n<p>触发软中断之后&#xff0c;硬件逻辑处理这个中断&#xff0c;进行中断相关设置&#xff0c;并参照IDT跳转到相关的中断处理例程&#xff0c;/kern/trap</p>\n<p><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjsztf9cqinlp%2F%E6%8D%95%E8%8E%B73.PNG\" alt=\"\" /><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjsztfgl3h1i2%2F%E6%8D%95%E8%8E%B74.PNG\" alt=\"\" /></p>\n<p>从vector128跳转到alltraps&#xff0c;最终调用trap&#xff0c;在此期间完成了tf的构造</p>\n<p><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjsztfm88s6o1%2F%E6%8D%95%E8%8E%B75.PNG\" alt=\"\" /><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjsztfu28dpae%2F%E6%8D%95%E8%8E%B76.PNG\" alt=\"\" /><img src=\"/redirect/s3?bucket=uploads&amp;prefix=attach%2Fi5j09fnsl7k5x0%2FjsjptolvvI0o%2Fjsztg1ac3o45%2F%E6%8D%95%E8%8E%B77.PNG\" alt=\"\" /></p>\n<p>最终通过一个syscalls数组&#xff0c;依据相应的系统调用编号跳转到最终的实现程序。</p>", "created": "2019-03-08T08:33:42Z", "bucket_order": 58, "bucket_name": "Week 3/3 - 3/9", "type": "followup", "tag_good": [], "uid": "jsjptolvvI0o", "children": [], "tag_good_arr": [], "no_answer": 1, "id": "jszszgh1b1s25f", "updated": "2019-03-08T08:33:42Z", "config": {}}], "tag_good_arr": [], "id": "jeeec163fj74if", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 3, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1642683500603, "default_anonymity": "no"}, "error": null, "aid": "kymzcd2z23v3ww"}