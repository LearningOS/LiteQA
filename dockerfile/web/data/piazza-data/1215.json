{"result": {"folders": ["lab2"], "nr": 1215, "data": {"embed_links": []}, "created": "2018-05-04T14:21:46Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "jgorbeenaskV", "data": "jgs1sp2e9sr1jt", "type": "create", "when": "2018-05-04T14:21:46Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "data": "jhehfhal1a6fs", "to": "jgs1sp2bbqk1js", "type": "s_answer", "when": "2018-05-20T07:10:19Z"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "jgorbeenaskV", "subject": "关于lab2逻辑地址/线性地址/物理地址的四个映射阶段疑惑", "created": "2018-05-04T14:21:46Z", "content": "<p>关于lab2中&#xff0c;地址映射关系的疑问&#xff0c;实验指导书中写的实在看不太懂&#xff1a;</p>\n<p></p>\n<ul><li><strong>第一个疑问&#xff1a;</strong><br />在地址映射的第二阶段&#xff0c;从kern_\\entry函数开始&#xff0c;到执行enable_page函数。此时有如下的映射关系&#xff1a;\n<pre>virt addr - 0xC0000000 = linear addr = phy addr</pre>\n此时按照指导书中的说法&#xff0c;只开启了段机制&#xff0c;那么此时的gdt是如何设置才能去保证这种转换访问到正确的物理地址。</li><li><strong>第二个疑问&#xff1a;</strong><br />在第三阶段&#xff0c;即从enable_page函数开始&#xff0c;到执行gdt_init函数之前&#xff0c;此时映射关系如下&#xff1a;<br />\n<pre>virt addr - 0xC0000000 = linear addr = phy addr &#43; 0xC0000000 # 线性地址在0~4MB之外的三者映射关系\nvirt addr - 0xC0000000 = linear addr = phy addr # 线性地址在0~4MB之内的三者映射关系</pre>\n为啥要形成这种奇怪的映射关系&#xff1f;怎么形成这种映射关系&#xff1f;<br />指导书中说只需要让页表在0~4MB的线性地址与KERNBASE ~ KERNBASE&#43;4MB的线性地址都映射到 0~4MB的物理地址空间即可让内核正常工作。为什么这样可以&#xff1f;</li></ul>\n<p></p>\n<p>疑问比较多&#xff0c;希望我的描述足够清晰&#xff5e;&#xff5e;谢谢&#xff01;&#xff01;</p>\n<p></p>"}], "type": "question", "tags": ["lab2", "student"], "tag_good": [{"role": "student", "name": "Hongkun Ge", "endorser": {}, "admin": false, "photo": null, "id": "i5ehqgv6vgu535", "photo_url": null, "published": true, "us": false, "facebook_id": null}], "unique_views": 177, "children": [{"folders": [], "data": {"embed_links": []}, "children": [], "created": "2018-05-20T07:10:19Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "id": "jhehfhairtjfr", "history": [{"anon": "no", "uid": "isu0wqaoff5125", "subject": "", "created": "2018-05-20T07:10:19Z", "content": "<p><strong>第一个疑问&#xff1a;</strong></p>\n<p>段基址设为 - 0xC0000000 即可。</p>\n<p></p>\n<p><strong>第二个疑问&#xff1a;</strong></p>\n<p>大概是因为要确保初始化分段分页的整个过程的地址转换都是对的&#xff0c;不产生页错误。通过设置GDT和页表&#xff0c;就能搞出来这种关系。</p>\n<p>您说的这个ucore实现在开分页后&#xff0c;会重新设置一下段表&#xff0c;把virt addr再次映射为和linear addr相等&#xff0c;这个过程会涉及到两段linear addr&#xff0c;他们都需要被映射到对的物理地址。</p>\n<p></p>\n<p>另外&#xff0c;当然这样的实现可能不是最优的。</p>\n<p></p>"}], "type": "s_answer", "tag_endorse_arr": [], "config": {}, "is_tag_endorse": false}], "tag_good_arr": ["i5ehqgv6vgu535"], "no_answer": 0, "id": "jgs1sp2bbqk1js", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 2, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169429515, "default_anonymity": "no"}, "error": null, "aid": "kyv0ni8b2pa21z"}