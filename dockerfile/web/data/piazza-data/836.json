{"result": {"history_size": 1, "folders": ["lab2"], "nr": 836, "data": {"embed_links": []}, "created": "2016-04-26T07:39:45Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"uid": "illojz7yoPj", "anon": "no", "when": "2016-04-26T07:39:45Z", "data": "inh4h1dme5z24c", "type": "create"}, {"to": "inh4h1cjag524a", "uid": "hs2swpdtr91gu", "anon": "no", "when": "2016-04-26T12:08:03Z", "data": "inhe22loaia4tp", "type": "i_answer"}, {"to": "inh4h1cjag524a", "uid": "illojz7yoPj", "anon": "no", "when": "2016-04-27T06:01:42Z", "type": "followup"}, {"to": "inh4h1cjag524a", "uid": "hs2swpdtr91gu", "anon": "no", "when": "2016-05-04T06:41:41Z", "type": "feedback"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "illojz7yoPj", "subject": "关于链接地址 虚拟地址关系的问题。", "created": "2016-04-26T07:39:45Z", "content": "<p>大家好~   有一个小小的困惑&#xff1a;是关于 将页目录 (pgdir的物理地址 映射到 虚拟地址 VPT上)的问题</p>\n<p></p>\n<pre>boot_pgdir[PDX(VPT)] = PADDR(boot_pgdir) | PTE_P | PTE_W;</pre>\n<p></p>\n<p>此时 boot_pgdir是 刚一个页的虚拟地址。不太懂 boot_pgdir[PDX(VPT)] 的意义。</p>\n<p>&#xff08;已知&#xff1a; PDX&#xff08;VPT&#xff09;是虚拟地址VPT  页目录的index &#xff1b; boot_pgdir 是一个 pde_t * 指针&#xff0c;即unsigned int *&#xff09;。</p>\n<p>为什么要让boot_pgdir指针向后 PDX(VPT) &#xff0c;再设置它的内容呢&#xff1f;</p>"}], "type": "question", "tags": ["lab2", "student"], "tag_good": [], "unique_views": 168, "children": [{"history_size": 1, "folders": [], "data": {"embed_links": []}, "created": "2016-04-26T12:08:03Z", "bucket_order": 3, "tag_endorse": [{"role": "student", "name": "天信", "endorser": {}, "admin": false, "photo": null, "id": "illojz7yoPj", "photo_url": null, "us": false, "facebook_id": null}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hs2swpdtr91gu", "subject": "", "created": "2016-04-26T12:08:03Z", "content": "<p>进行内存管理的时候&#xff0c;boot_pgdir也是一页&#xff0c;所以对它自身也要进行管理</p>"}], "type": "i_answer", "tag_endorse_arr": ["illojz7yoPj"], "children": [], "id": "inhe22lj92a4to", "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>很感谢您的回答。 已经明白上个问题 ^ ^。</p>\n<p></p>\n<p>不过又有了两个新的困惑。</p>\n<p></p>\n<ul><li>关于宏定义中获取二级页表的问题</li></ul>\n<pre> #define PTE_ADDR(pte)   ((uintptr_t)(pte) &amp; ~0xFFF)<br />  #define PDE_ADDR(pde)     PTE_ADDR(pde)</pre>\n<p></p>\n<p>我的理解是&#xff1a; 一级页表&#xff08;即boot_pgdir变量&#xff09;中的目录项&#xff08;即pde&#xff09;存放的是 二级页表的起始地址。</p>\n<p>但是<strong>为什么根据 pde 来获取二级页表的起始地址时&#xff0c;还需要做一个  &amp;  ~0xFFF的操作&#xff1f;</strong></p>\n<p><strong></strong></p>\n<p><strong></strong></p>\n<ul><li>关于根据 页的虚拟地址获取物理地址的问题</li></ul>\n<pre>struct Page * page = alloc_page() ;    // 分配一页并将该页的虚拟地址放到page变量中<br />page2pa(page);                         // 返回该页的物理地址。</pre>\n<p>困惑是 调用 <strong>page2pa 函数后&#xff0c;为什么 (page - pages)  &lt;&lt; 12 得到的是该页的物理地址呢&#xff1f;</strong></p>\n<pre>static inline ppn_t<br />page2ppn(struct Page *page) {<br />    return page - pages;<br />}<br /><br />static inline uintptr_t<br />page2pa(struct Page *page) {<br />    return page2ppn(page) &lt;&lt; PGSHIFT;<br />}</pre>\n<p></p>", "created": "2016-04-27T06:01:42Z", "bucket_order": 264, "bucket_name": "Week 4/24 - 4/30", "type": "followup", "tag_good": [], "uid": "illojz7yoPj", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>pte的低12位肯定是0&#xff0c;所以要进行清零操作</p>\n<p>pages是page数组的起始位置&#xff0c;page-pages得到了相对的偏移量</p>", "created": "2016-05-04T06:41:41Z", "bucket_order": 263, "bucket_name": "Week 5/1 - 5/7", "type": "feedback", "tag_good": [{"role": "student", "name": "pg2020", "endorser": {}, "admin": false, "photo": null, "id": "kmn3ap5pf8l3b2", "photo_url": null, "us": false, "facebook_id": null}], "uid": "hs2swpdtr91gu", "children": [], "tag_good_arr": ["kmn3ap5pf8l3b2"], "id": "inshx62phw662d", "updated": "2016-05-04T06:41:41Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "inigesrtxfb3kp", "updated": "2016-04-27T06:01:42Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "inh4h1cjag524a", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 4, "num_favorites": 2, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643168599583, "default_anonymity": "no"}, "error": null, "aid": "kyv05pun7kt41v"}