{"result": {"history_size": 1, "folders": ["lab2"], "nr": 1258, "data": {"embed_links": []}, "created": "2019-02-10T07:01:57Z", "bucket_order": 3, "no_answer_followup": 0, "change_log": [{"anon": "no", "uid": "i5ehqgv6vgu535", "data": "jryk9b6cu1k6th", "type": "create", "when": "2019-02-10T07:01:57Z"}, {"anon": "no", "uid": "isvte2o93ju2dt", "to": "jryk9b695yc6tg", "type": "followup", "when": "2019-02-10T07:35:36Z"}, {"anon": "no", "uid": "i5ehqgv6vgu535", "to": "jryk9b695yc6tg", "type": "feedback", "when": "2019-02-10T07:40:33Z"}, {"anon": "no", "uid": "isvte2o93ju2dt", "to": "jryk9b695yc6tg", "type": "feedback", "when": "2019-02-10T08:19:04Z"}, {"anon": "no", "uid": "hcrrjuyequh4bt", "data": "jsl1c6t49gd6kb", "to": "jryk9b695yc6tg", "type": "i_answer", "when": "2019-02-26T00:31:01Z"}, {"anon": "no", "uid": "hcrrjuyequh4bt", "data": "jsl1d1ok9y97ec", "type": "i_answer_update", "when": "2019-02-26T00:31:41Z"}, {"anon": "no", "uid": "isu0wqaoff5125", "to": "jryk9b695yc6tg", "type": "followup", "when": "2019-02-26T12:29:43Z"}, {"anon": "no", "uid": "hcrrjuyequh4bt", "to": "jryk9b695yc6tg", "type": "followup", "when": "2019-02-26T12:41:01Z"}, {"anon": "no", "uid": "kkibx292pjp2go", "to": "jryk9b695yc6tg", "type": "feedback", "when": "2021-02-05T13:00:18Z", "cid": "kksaqloas1h3zp"}], "bucket_name": "Today", "history": [{"anon": "no", "uid": "i5ehqgv6vgu535", "subject": "Docs of Lab2 Doesn&#39;t make sense at all.", "created": "2019-02-10T07:01:57Z", "content": "<p>Sorry I don&#39;t have the Chinese input software in this machine.</p>\n<p></p>\n<p>I am doing lab2 of OS. I read the docs here. <a href=\"https://github.com/chyyuu/ucore_os_docs/blob/master/lab2/lab2_3_3_5_4_maping_relations.md\">https://github.com/chyyuu/ucore_os_docs/blob/master/lab2/lab2_3_3_5_4_maping_relations.md</a></p>\n<p>It mentions the code about 4 steps of memory mapping related to segment/page. For example, </p>\n<pre>//具体实现在pmm.c中pmm_init函数的语句&#xff1a;<br />boot_pgdir[0] = boot_pgdir[PDX(KERNBASE)]; </pre>\n<p>Also it mentions there&#39;s enable_paging function inside kern/mm/pmm.c. </p>\n<p>BUT WHERE IS THIS CODE? </p>\n<p>I did a global search and didn&#39;t find the code in <a href=\"https://github.com/chyyuu/ucore_os_lab/\">https://github.com/chyyuu/ucore_os_lab/</a>, which is really frustrating. </p>\n<p>I did find it here in a repo of <a href=\"https://github.com/twd2/ucore_os_lab/\">https://github.com/twd2/ucore_os_lab/</a></p>\n<p>Is the doc and the code mismatching? I took a LOT of time reading the doc and try to verify it in the code. But I simply CANNOT because I cannot find the code mentioned in the doc.</p>\n<p></p>\n<p>Can anyone help me with this? Thanks.</p>\n<p></p>\n<p>I am not from TsinghuaU and doing Lab2 right now. So maybe there&#39;re some updates that I don&#39;t know. </p>"}], "type": "question", "tags": ["lab2", "student"], "tag_good": [], "unique_views": 209, "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>The paging initialization procedure is changed by commit <a href=\"https://github.com/chyyuu/ucore_os_lab/commit/07a95c0a5f30bebdf7ee459cfe996004b0773899\" target=\"_blank\">07a95c0</a>.</p>", "created": "2019-02-10T07:35:36Z", "bucket_order": 119, "bucket_name": "Week 2/3 - 2/9", "type": "followup", "tag_good": [], "uid": "isvte2o93ju2dt", "children": [{"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>Many thanks for your quick response.</p>\n<p>I see __gdt is removed by this commit. Can you please help explain why is that? or why is that not needed anymore?</p>\n<p>https://github.com/chyyuu/ucore_os_lab/commit/07a95c0a5f30bebdf7ee459cfe996004b0773899#diff-1bf1e9337900860ed9f33c8d3ede3d24L42</p>\n<p></p>", "created": "2019-02-10T07:40:33Z", "bucket_order": 119, "bucket_name": "Week 2/3 - 2/9", "type": "feedback", "tag_good": [], "uid": "i5ehqgv6vgu535", "children": [], "tag_good_arr": [], "id": "jrylmy6d6nr459", "updated": "2019-02-10T07:40:33Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>The change is made by another student, and therefore the following explanation might be wrong:</p>\n<p></p>\n<p>In the original code, __gdt is loaded so access to a virtual address <span style=\"text-decoration:underline\">X</span> will actually access physical address <span style=\"text-decoration:underline\">X - </span><span style=\"text-decoration:underline\">KERNBASE</span>, because the kernel is loaded at physical address 0x10000 (<a href=\"https://github.com/chyyuu/ucore_os_lab/blob/fb18c14626aa3a0ab960f393db10eceecb5216bc/labcodes/lab2/boot/bootmain.c#L34\" target=\"_blank\">bootmain.c#L34</a>) while the code is linked at 0xC0100000 (<a href=\"https://github.com/chyyuu/ucore_os_lab/blob/024c8ffc62d4f38fa16e0c1c90758cae4cfa2319/labcodes/lab2/tools/kernel.ld#L10\" target=\"_blank\">kernel.ld#L10</a>).</p>\n<p>When you want to enable paging later, you will find both segmentation and paging system are working, which means both of them are translating the address. And the original code is a workaround for this case.</p>\n<p></p>\n<p>To make life easier, we change the code and use paging mechanism instead of segmentation at the very beginning (<a href=\"https://github.com/chyyuu/ucore_os_lab/blob/024c8ffc62d4f38fa16e0c1c90758cae4cfa2319/labcodes/lab2/kern/init/entry.S#L13\" target=\"_blank\">entry.S#L13</a>). You can check the content of initial page table __boot_pgdir, any virtual address <span style=\"text-decoration:underline\">X</span> above KERNBASE will be translated to physical address <span style=\"text-decoration:underline\">X - KERNBASE</span>.</p>", "created": "2019-02-10T08:19:04Z", "bucket_order": 119, "bucket_name": "Week 2/3 - 2/9", "type": "feedback", "tag_good": [], "uid": "isvte2o93ju2dt", "children": [], "tag_good_arr": [], "id": "jryn0hcyj4c7lt", "updated": "2019-02-10T08:19:04Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "subject": "<p>&#34;because the kernel is loaded at physical address 0x10000 (<a href=\"https://github.com/chyyuu/ucore_os_lab/blob/fb18c14626aa3a0ab960f393db10eceecb5216bc/labcodes/lab2/boot/bootmain.c#L34\" target=\"_blank\" rel=\"noopener noreferrer\">bootmain.c#L34</a>)<br />    #define ELFHDR ((struct elfhdr *)0x10000) // scratch space<br /><br />0x10000 is WHERE ELFHDR is saved.<br /></p>\n<p></p>\n<p>(kernel.ld) has a line &#34;. = 0x100000;&#34;, so kernel is loaded at physical address 0x100000 </p>", "created": "2021-02-05T13:00:18Z", "bucket_order": 15, "bucket_name": "Week 1/31 - 2/6", "type": "feedback", "tag_good": [], "uid": "kkibx292pjp2go", "children": [], "tag_good_arr": [], "id": "kksaqloas1h3zp", "updated": "2021-02-05T13:00:18Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jrylgl81jrww", "updated": "2019-02-10T07:35:36Z", "config": {}}, {"history_size": 2, "folders": [], "data": {"embed_links": []}, "created": "2019-02-26T00:31:01Z", "bucket_order": 3, "tag_endorse": [], "bucket_name": "Today", "history": [{"anon": "no", "uid": "hcrrjuyequh4bt", "subject": "", "created": "2019-02-26T00:31:41Z", "content": "<p>We are updating the docs of lab2. Please wait a moment.</p>"}, {"anon": "no", "uid": "hcrrjuyequh4bt", "subject": "", "created": "2019-02-26T00:31:01Z", "content": "<p>We are updating the docs of lab2.</p>"}], "type": "i_answer", "tag_endorse_arr": [], "children": [], "id": "jsl1c6t06jm6ka", "config": {}, "is_tag_endorse": false}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>文档已更新&#xff0c;请查看。</p>\n<p>&#xff08;如果发现文档有错&#xff0c;请及时提出&#xff0c;老师肯定会修正的。&#xff09;</p>", "created": "2019-02-26T12:29:43Z", "bucket_order": 116, "bucket_name": "Week 2/24 - 3/2", "type": "followup", "tag_good": [], "uid": "isu0wqaoff5125", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "jslr0gid7l64r", "updated": "2019-02-26T12:29:43Z", "config": {}}, {"anon": "no", "folders": [], "data": {"embed_links": null}, "no_upvotes": 0, "subject": "<p>&#64;Hongkun Ge  你看的很仔细。鼓励挑错&#xff01;欢迎大吼大叫&#xff01;</p>", "created": "2019-02-26T12:41:01Z", "bucket_order": 116, "bucket_name": "Week 2/24 - 3/2", "type": "followup", "tag_good": [], "uid": "hcrrjuyequh4bt", "children": [], "tag_good_arr": [], "no_answer": 0, "id": "jslrez7vio23tk", "updated": "2019-02-26T12:41:01Z", "config": {}}], "tag_good_arr": [], "no_answer": 0, "id": "jryk9b695yc6tg", "config": {}, "status": "active", "drafts": null, "request_instructor": 0, "request_instructor_me": false, "bookmarked": 5, "num_favorites": 1, "my_favorite": false, "is_bookmarked": false, "is_tag_good": false, "q_edits": [], "i_edits": [], "s_edits": [], "t": 1643169526202, "default_anonymity": "no"}, "error": null, "aid": "kyv0pku2jo2311"}